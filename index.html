<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ButcherCode</title>
  <link rel="icon" href="images/favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" integrity="sha512-o6p4D+E2n9B0o2k2yX2b/f/2q+6a+8+z3f6q3g+4y+5t6u7p8s9w=" crossorigin="anonymous" referrerpolicy="no-referrer" />

  <style>
    /* Definindo vari√°veis CSS para cores */
    :root {
      --cor-fundo-principal: #113311;
      --cor-fundo-secundario: #002200;
      --cor-texto-principal: #b3ffb3;
      --cor-texto-secundario: #aaffaa;
      --cor-header-fundo: #005500;
      --cor-sidebar-fundo: #004400;
      --cor-borda-clara: #b3ffb3;
      --cor-input-fundo: #001100;
      --cor-input-borda: #88aa88;
      --cor-input-placeholder: #88aa88;
      --cor-botao-fundo: #006600;
      --cor-botao-hover: #008800;
      --cor-botao-texto: #ccffcc;
      --cor-link: #88ff88;
      --cor-destaque: #00cc00;
      --cor-erro: #ff6666;
      --cor-aviso: #ffaa00;
      --cor-critico: #ff0000;
      --cor-sucesso: #00ff00;
      --cor-modal-fundo: #002200;
      --cor-modal-sombra: rgba(0, 255, 0, 0.2);
      --cor-camuflagem: brightness(0.4) blur(3px);
      --cor-botao-admin-perigo: #aa0000;
      --cor-botao-admin-perigo-hover: #cc0000;
    }

    body {
      margin: 0;
      background: var(--cor-fundo-principal);
      color: var(--cor-texto-principal);
      font-family: 'Source Code Pro', monospace;
      font-size: 16px;
      line-height: 1.6;
      overflow-x: hidden;
      transition: margin-left 0.3s ease, background 0.3s ease, color 0.3s ease;
      padding-bottom: 20px;
    }
    body.sidebar-open main {
      margin-left: 320px;
      filter: var(--cor-camuflagem);
      opacity: 0.6;
      pointer-events: none;
      transition: filter 0.3s ease, opacity 0.3s ease, margin-left 0.3s ease;
    }

    body:not(.sidebar-open) main {
        filter: brightness(1) blur(0);
        opacity: 1;
        pointer-events: auto;
        transition: filter 0.3s ease, opacity 0.3s ease, margin-left 0.3s ease;
    }

    header {
      background: var(--cor-header-fundo);
      padding: 15px 30px;
      display: flex;
      align-items: center;
      position: fixed;
      width: 100%;
      top: 0;
      z-index: 1001;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      transition: background 0.3s ease;
      justify-content: space-between;
    }
    #hamburger {
      cursor: pointer;
      width: 35px;
      height: 26px;
      position: relative;
    }
    #hamburger span {
      background: var(--cor-borda-clara);
      position: absolute;
      height: 3px;
      width: 100%;
      left: 0;
      border-radius: 2px;
      transition: 0.3s ease, background 0.3s ease;
    }
    #hamburger span:nth-child(1) { top: 0; }
    #hamburger span:nth-child(2) { top: 11px; }
    #hamburger span:nth-child(3) { top: 22px; }
    #hamburger.open span:nth-child(1) { transform: rotate(45deg); top: 11px; }
    #hamburger.open span:nth-child(2) { opacity: 0; }
    #hamburger.open span:nth-child(3) { transform: rotate(-45deg); top: 11px; }

    h1 {
      margin: 0;
      font-size: 2.2rem;
      font-weight: bold;
      animation: fadeInScale 1s ease forwards;
      flex-grow: 1;
      text-align: center;
      cursor: pointer;
      user-select: none;
      margin-right: 35px;
    }
    @keyframes fadeInScale {
      0% { opacity: 0; transform: scale(0.8); }
      100% { opacity: 1; transform: scale(1); }
    }
    #sidebar {
      position: fixed;
      top: 65px;
      left: 0;
      width: 300px;
      height: calc(100vh - 65px);
      background: var(--cor-sidebar-fundo);
      color: var(--cor-texto-principal);
      overflow-y: auto;
      z-index: 1000;
      padding: 20px;
      transform: translateX(-100%);
      transition: transform 0.3s ease, background 0.3s ease, color 0.3s ease;
      box-shadow: 2px 0 5px rgba(0, 0, 0, 0.1);
    }
    #sidebar.open { transform: translateX(0); }
    #sidebar h2 {
      margin-top: 0;
      font-size: 1.4rem;
      border-bottom: 1px solid var(--cor-borda-clara);
      padding-bottom: 8px;
      margin-bottom: 15px;
      cursor: pointer;
      user-select: none;
      position: relative;
      padding-right: 25px;
      transition: border-color 0.3s ease, color 0.3s ease;
    }
    #sidebar h2::after {
      content: "‚ñ∂";
      position: absolute;
      right: 5px;
      top: 2px;
      transition: transform 0.3s ease;
      color: var(--cor-texto-principal);
    }
    #sidebar h2.open::after { transform: rotate(90deg); }

    .menu-sections { list-style: none; padding: 0; margin: 0; }
    .menu-section { margin-bottom: 25px; }
    .subfolder {
      margin-left: 20px;
      display: none;
      margin-bottom: 12px;
      list-style: none;
      padding: 0;
    }
    .subfolder.open { display: block; }
    .subfolder .item {
      cursor: pointer;
      padding: 5px 8px;
      border-radius: 4px;
      margin-bottom: 5px;
    }
    .subfolder .item:hover {
      background: var(--cor-botao-fundo);
      transition: background 0.3s ease;
    }
    /* Estilos para a se√ß√£o de instru√ß√µes */
    #instructionsContent h4 {
        color: var(--cor-destaque);
        margin-top: 15px;
        margin-bottom: 10px;
        font-size: 1.15rem;
    }
    #instructionsContent ul {
        list-style-type: none;
        padding-left: 15px;
    }
    #instructionsContent ul li {
        margin-bottom: 8px;
    }
    #instructionsContent ul ul {
        padding-left: 20px;
        list-style-type: disc; /* Ou circle */
    }
    #instructionsContent ul ul li {
        margin-bottom: 5px;
    }
    #instructionsContent p {
        margin-bottom: 10px;
    }
     #instructionsContent p:last-child { margin-bottom: 0; }


    main {
      margin: 100px 30px 30px 30px;
      max-width: 700px; /* Pode precisar ajustar se o artigo for muito largo */
      transition: margin-left 0.3s ease, background-color 0.3s ease;
      padding: 20px;
      background-color: var(--cor-fundo-secundario);
      border-radius: 8px;
    }
    #mainTerminalSection, #gameCodeSection, #initialScreen, #addProductSection,
    #commentsSection, #userProfileSection, #adminProductManagementSection,
    #artigoCarneBovinaSection /* Adicionado aqui */ { display: none; }


    main.show-terminal #mainTerminalSection { display: block; }
    main.show-game #gameCodeSection { display: block; }
    main.show-initial #initialScreen { display: block; }
    main.show-add-product #addProductSection { display: block; }
    main.show-comments #commentsSection { display: block; }
    main.show-profile #userProfileSection { display: block; }
    main.show-admin-products #adminProductManagementSection { display: block; }
    main.show-artigo-carne #artigoCarneBovinaSection { display: block; } /* Adicionado aqui */


    label {
      display: block;
      margin-bottom: 8px;
      font-weight: bold;
      color: var(--cor-botao-texto);
      transition: color 0.3s ease;
    }
    .input-wrapper {
      position: relative;
      display: flex;
      flex-direction: column;
      margin-bottom: 15px;
    }
    input, button, select {
      padding: 12px;
      font-size: 1.1rem;
      border-radius: 6px;
      font-family: 'Source Code Pro', monospace;
    }
    input::placeholder { color: var(--cor-input-placeholder); }
    input:focus, select:focus, textarea:focus {
      outline: none;
      border-color: var(--cor-destaque);
      box-shadow: 0 0 5px rgba(0, 255, 0, 0.3);
    }
    input, select, textarea {
      width: 100%;
      box-sizing: border-box;
      background: var(--cor-input-fundo);
      border: 1px solid var(--cor-input-borda);
      color: var(--cor-texto-principal);
      transition: background 0.3s ease, border-color 0.3s ease, color 0.3s ease;
    }
    input { padding-right: 12px; }
    select {
        margin-top: 5px;
        appearance: none;
        -webkit-appearance: none;
        -moz-appearance: none;
        background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23b3ffb3%22%20d%3D%22M287%2069.9a17.6%2017.6%200%200%200-24.8%200L146.2%20185.7%2030.2%2069.9a17.6%2017.6%200%200%200-24.8%2024.8l139%20139.1a17.6%2017.6%200%200%200%2024.8%200l139-139.1a17.6%2017.6%200%200%200%200-24.8z%22%2F%3E%3C%2Fsvg%3E');
        background-repeat: no-repeat;
        background-position: right 10px top 50%;
        background-size: 12px auto;
    }

    button {
      margin-top: 0px;
      background: var(--cor-botao-fundo);
      color: var(--cor-botao-texto);
      border: none;
      cursor: pointer;
      transition: background 0.3s ease, color 0.3s ease;
      width: 100%;
    }
    button:hover { background: var(--cor-botao-hover); }
    button.admin-delete-button {
        background-color: var(--cor-botao-admin-perigo);
        color: white;
        padding: 5px 10px;
        font-size: 0.9rem;
        margin-left: 10px;
        margin-top: 5px;
        width: auto;
        display: inline-block;
    }
    button.admin-delete-button:hover {
        background-color: var(--cor-botao-admin-perigo-hover);
    }


    #result {
      margin-top: 25px;
      min-height: 40px;
      font-size: 1.6rem;
      font-weight: bold;
      border: 2px solid var(--cor-destaque);
      padding: 12px;
      border-radius: 8px;
      background: var(--cor-fundo-secundario);
      white-space: nowrap;
      overflow: hidden;
      position: relative;
      transition: background 0.3s ease, border-color 0.3s ease;
    }
    #result .marquee {
      display: inline-block;
      white-space: nowrap;
      animation: marquee 10s linear infinite;
      animation-play-state: paused;
      transform: translateX(100%);
    }
    #result.scrolling .marquee { animation-play-state: running; }
    @keyframes marquee {
      0% { transform: translateX(100%); }
      100% { transform: translateX(-100%); }
    }

    #result .feedback-icon {
        position: absolute;
        right: 15px;
        top: 50%;
        transform: translateY(-50%);
        font-size: 1.8em;
        opacity: 0;
        transition: opacity 0.3s ease-out, transform 0.3s ease-out;
    }
    #result.success .feedback-icon.show { opacity: 1; color: var(--cor-sucesso); transform: translateY(-50%) scale(1.1); }
    #result.error .feedback-icon.show { opacity: 1; color: var(--cor-erro); transform: translateY(-50%) scale(1.1); }

    #authModalOverlay {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0, 0, 0, 0.8);
      display: none;
      justify-content: center; align-items: center;
      z-index: 9999;
      opacity: 0; visibility: hidden;
      transition: opacity 0.3s ease, visibility 0.3s ease;
    }
    #authModalOverlay.show { opacity: 1; visibility: visible; display: flex; }
    #authModal {
      background: var(--cor-modal-fundo);
      padding: 40px; border-radius: 10px;
      text-align: center;
      box-shadow: 0 5px 15px var(--cor-modal-sombra);
      max-width: 400px; width: 90%;
      color: var(--cor-texto-principal);
      transform: translateY(-20px);
      transition: transform 0.3s ease, background 0.3s ease, color 0.3s ease, box-shadow 0.3s ease;
      position: relative;
    }
    #authModalOverlay.show #authModal { transform: translateY(0); }
    #authModal h2 { margin-top: 0; font-size: 1.8rem; color: var(--cor-botao-texto); margin-bottom: 20px; }
    #passwordInput, #usernameInput {
        font-size: 1.1rem;
        text-align: center;
        margin-bottom: 15px;
    }
    #authSubmit, #registerButton {
      padding: 12px 30px;
      font-size: 1.1rem;
      margin-bottom: 10px;
    }
    #authError { color: var(--cor-erro); margin-top: 10px; font-size: 0.95rem; min-height: 20px; }

    .close-modal-button {
        position: absolute;
        top: 15px;
        right: 20px;
        font-size: 2.2rem;
        color: var(--cor-texto-principal);
        cursor: pointer;
        line-height: 1;
        padding: 5px;
        transition: color 0.3s ease;
    }
    .close-modal-button:hover {
        color: var(--cor-destaque);
    }

    #welcomeMessage {
      font-size: 1.8rem; font-weight: bold; color: var(--cor-texto-secundario);
      opacity: 0; transition: opacity 0.5s ease; pointer-events: none;
      text-shadow: 0 0 10px rgba(0, 255, 0, 0.5); margin-bottom: 20px;
      min-height: 3em; /* Ajustado para acomodar duas linhas */
    }
    #welcomeMessage.show { opacity: 1; pointer-events: auto; }
    #initial-screen-options {
      display: flex; flex-direction: column; gap: 15px; margin-top: 30px;
      opacity: 0; visibility: hidden;
      transition: opacity 0.5s ease, visibility 0.5s ease;
      padding: 0 20px; box-sizing: border-box;
    }
    #initial-screen-options.show { opacity: 1; visibility: visible; }
    #initial-screen-options button {
      background-color: var(--cor-botao-hover); color: var(--cor-botao-texto);
      padding: 15px; font-size: 1.3rem; border: none; border-radius: 8px;
      cursor: pointer; transition: background-color 0.3s ease, transform 0.1s ease;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
    }
    #initial-screen-options button:hover { background-color: var(--cor-destaque); transform: translateY(-2px); }

    #result.success { border-color: var(--cor-destaque); background-color: var(--cor-fundo-secundario); color: var(--cor-sucesso); }
    #result.error { border-color: var(--cor-critico); background-color: #330000; color: var(--cor-erro); }

    #game-container { padding: 15px; background-color: var(--cor-fundo-secundario); border-radius: 6px; color: var(--cor-texto-secundario); text-align: center; transition: background 0.3s ease, color 0.3s ease; }
    #question { font-size: 1.1rem; margin-bottom: 15px; min-height: 3em; display: flex; align-items: center; justify-content: center; text-align: center; }
    #options button { display: block; width: 100%; padding: 10px; margin-bottom: 8px; background-color: var(--cor-botao-fundo); color: var(--cor-botao-texto); border: none; border-radius: 4px; cursor: pointer; font-family: 'Source Code Pro', monospace; transition: background-color 0.3s ease, color 0.3s ease; }
    #options button:hover:not(:disabled) { background-color: var(--cor-botao-hover); }
    #options button:disabled { cursor: not-allowed; opacity: 0.7; }
    #feedback { margin-top: 10px; font-weight: bold; min-height: 2em; }
    #feedback.correct { color: var(--cor-sucesso); }
    #feedback.incorrect { color: var(--cor-erro); }
    #score-display { margin-top: 15px; font-weight: bold; font-size: 1.05rem; min-height: 1.5em; }
    #next-question { padding: 10px 20px; background-color: var(--cor-botao-fundo); color: var(--cor-botao-texto); border: none; border-radius: 4px; cursor: pointer; font-family: 'Source Code Pro', monospace; margin-top: 15px; transition: background-color 0.3s ease, color 0.3s ease; }
    #next-question:hover { background-color: var(--cor-botao-hover); }
    #end-game-button { padding: 10px 20px; background-color: var(--cor-critico); color: #ffffff; border: none; border-radius: 4px; cursor: pointer; font-family: 'Source Code Pro', monospace; margin-top: 15px; transition: background-color 0.3s ease, color 0.3s ease; }
    #end-game-button:hover { background-color: #aa0000; }
    #game-start-screen, #game-end-screen { display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; padding: 20px; background-color: var(--cor-fundo-secundario); border-radius: 8px; min-height: 200px; transition: background 0.3s ease, color 0.3s ease; }
    #game-start-screen h3, #game-end-screen h3 { font-size: 1.8rem; color: var(--cor-botao-texto); margin-bottom: 20px; }
    #game-end-screen p { font-size: 1.2rem; margin-top: 10px; margin-bottom: 20px; }
    #start-game-button, #restart-game-button { padding: 15px 30px; background-color: var(--cor-botao-hover); color: var(--cor-botao-texto); border: none; border-radius: 8px; font-size: 1.4rem; cursor: pointer; transition: background-color 0.3s ease, transform 0.1s ease, color 0.3s ease; }
    #start-game-button:hover, #restart-game-button:hover { background-color: var(--cor-destaque); transform: translateY(-2px); }
    #progress-bar-container { width: 100%; background-color: var(--cor-input-fundo); border-radius: 5px; margin-top: 15px; overflow: hidden; height: 10px; position: relative; }
    #progress-bar { height: 100%; width: 0%; background-color: var(--cor-sucesso); border-radius: 5px; transition: width 0.1s linear, background-color 0.3s ease; }
    #timer { font-size: 1.2rem; font-weight: bold; margin-top: 10px; color: var(--cor-texto-secundario); transition: color 0.3s ease; }
    #timer.warning { color: var(--cor-aviso); }
    #timer.critical { color: var(--cor-critico); }
    #question-counter { font-size: 0.9em; color: var(--cor-texto-secundario); transition: color 0.3s ease; }

    .back-to-home-button { display: block; margin-top: 30px; width: 100%; padding: 12px; background-color: #555500; color: #fff; border: none; border-radius: 6px; font-size: 1.1rem; cursor: pointer; transition: background-color 0.3s ease, transform 0.1s ease, color 0.3s ease; }
    .back-to-home-button:hover { background-color: #777700; transform: translateY(-2px); }

    #addProductSection { padding: 20px; background-color: var(--cor-fundo-secundario); border-radius: 8px; margin-top: 30px; color: var(--cor-texto-secundario); }
    #addProductSection h2 { color: var(--cor-botao-texto); font-size: 1.6rem; margin-bottom: 20px; border-bottom: 1px solid var(--cor-destaque); padding-bottom: 10px; }
    #addProductSection label { margin-bottom: 5px; color: var(--cor-texto-principal); }
    #addProductSection input[type="number"] { -moz-appearance: textfield; }
    #addProductSection input::-webkit-outer-spin-button, #addProductSection input::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
    #addProductSection input, #addProductSection select { margin-bottom: 15px; }

    #commentsSection { padding: 20px; background-color: var(--cor-fundo-secundario); border-radius: 8px; margin-top: 30px; color: var(--cor-texto-secundario); }
    #commentsSection h2 { color: var(--cor-botao-texto); font-size: 1.6rem; margin-bottom: 20px; border-bottom: 1px solid var(--cor-destaque); padding-bottom: 10px; }
    #commentsSection textarea {
        margin-bottom: 15px;
        min-height: 100px;
        resize: vertical;
    }
    #commentsSection button { margin-top: 0; margin-bottom: 15px; }
    #commentsList { margin-top: 20px; border-top: 1px dashed var(--cor-borda-clara); padding-top: 15px; }
    .comment-item { position: relative; background-color: #003300; border: 1px solid var(--cor-borda-clara); border-radius: 6px; padding: 10px 15px; margin-bottom: 10px; word-wrap: break-word; transition: background-color 0.3s ease; }
    .comment-item strong { color: var(--cor-destaque); } /* Estilo padr√£o para o nome, ser√° sobrescrito por .admin-username se aplic√°vel */
    .comment-item span.timestamp { font-size: 0.8em; color: var(--cor-texto-secundario); display: block; margin-top: 5px; }
    .comment-item .admin-delete-comment-btn {
        background-color: var(--cor-botao-admin-perigo);
        color: white;
        border: none;
        padding: 4px 8px;
        font-size: 0.85rem;
        border-radius: 4px;
        cursor: pointer;
        margin-left: 10px;
        float: right;
    }
    .comment-item .admin-delete-comment-btn:hover {
        background-color: var(--cor-botao-admin-perigo-hover);
    }
    #commentsFeedback { color: var(--cor-sucesso); margin-top: 10px; font-weight: bold; }

    #userProfileSection { padding: 20px; background-color: var(--cor-fundo-secundario); border-radius: 8px; margin-top: 30px; color: var(--cor-texto-secundario); }
    #userProfileSection h2 { color: var(--cor-botao-texto); font-size: 1.6rem; margin-bottom: 20px; border-bottom: 1px solid var(--cor-destaque); padding-bottom: 10px; }
    #userProfileSection p { font-size: 1.1rem; margin-bottom: 10px; }
    #userProfileSection button { margin-top: 15px; }
    #usernameDisplay { font-size: 1.3rem; font-weight: bold; color: var(--cor-destaque); margin-bottom: 15px; }

    /* Estilos para Se√ß√£o de Gerenciamento de Produtos Admin */
    #adminProductManagementSection { padding: 20px; background-color: var(--cor-fundo-secundario); border-radius: 8px; margin-top: 30px; color: var(--cor-texto-secundario); }
    #adminProductManagementSection h2 { color: var(--cor-botao-texto); font-size: 1.6rem; margin-bottom: 20px; border-bottom: 1px solid var(--cor-destaque); padding-bottom: 10px; }
    #adminProductManagementSection .product-list-admin { list-style: none; padding: 0; }
    #adminProductManagementSection .product-list-admin li {
        background-color: var(--cor-input-fundo);
        border: 1px solid var(--cor-input-borda);
        padding: 10px 15px;
        margin-bottom: 8px;
        border-radius: 6px;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    #adminProductManagementSection .product-list-admin li .product-info {
        flex-grow: 1;
    }
    #adminProductManagementSection .product-list-admin li .delete-product-btn,
    #adminProductManagementSection .product-list-admin li .edit-product-btn { /* Estilo comum para bot√µes de a√ß√£o */
        background-color: var(--cor-botao-admin-perigo);
        color: white;
        border: none;
        padding: 6px 12px;
        font-size: 0.9rem;
        border-radius: 4px;
        cursor: pointer;
        margin-left: 10px; /* Aumentado para separar mais os bot√µes */
        width: auto;
    }
    #adminProductManagementSection .product-list-admin li .edit-product-btn {
      background-color: var(--cor-botao-hover); /* Cor diferente para editar */
    }
    #adminProductManagementSection .product-list-admin li .edit-product-btn:hover {
      background-color: var(--cor-destaque);
    }
    #adminProductManagementSection .product-list-admin li .delete-product-btn:hover {
        background-color: var(--cor-botao-admin-perigo-hover);
    }
    #adminProductManagementFeedback { margin-top: 15px; font-weight: bold; min-height: 20px; }

    .admin-username {
        color: var(--cor-aviso); /* Amarelo */
        font-weight: bold;
    }
    .cooperator-username {
        color: var(--cor-link); /* Verde claro */
        font-weight: bold;
    }

    /* ESTILOS ADICIONAIS PARA O ARTIGO E SEU TESTE */
    #conteudoArtigoCarne {
        text-align: left;
        padding: 15px;
        border: 1px solid var(--cor-input-borda);
        border-radius: 6px;
        background-color: var(--cor-input-fundo);
        margin-bottom: 30px;
    }
    #conteudoArtigoCarne h1, /* H1 pode n√£o ser usado dentro do article se h2 j√° √© o t√≠tulo da se√ß√£o */
    #conteudoArtigoCarne h2, /* Se h2 √© o t√≠tulo da se√ß√£o, usar h3, h4 dentro do article */
    #conteudoArtigoCarne h3,
    #conteudoArtigoCarne h4,
    #conteudoArtigoCarne h5,
    #conteudoArtigoCarne h6 {
        color: var(--cor-destaque);
        margin-top: 1.5em;
        margin-bottom: 0.5em;
    }
     #conteudoArtigoCarne p, #conteudoArtigoCarne li {
        line-height: 1.7;
        margin-bottom: 1em;
    }
    #conteudoArtigoCarne ul {
        list-style-position: inside;
        padding-left: 20px; /* Adiciona um recuo para listas dentro do artigo */
    }
    #conteudoArtigoCarne ul ul { /* Para sub-listas */
        list-style-type: circle; /* Ou outro de sua prefer√™ncia */
        margin-left: 20px;
    }

    #testeConhecimentoArtigo {
        margin-top: 30px;
        padding: 15px;
        background-color: var(--cor-fundo-secundario);
        border-radius: 6px;
        color: var(--cor-texto-secundario);
        text-align: center;
    }
    #testeConhecimentoArtigo h3 { /* T√≠tulo do Quiz dentro da se√ß√£o */
        font-size: 1.8rem;
        color: var(--cor-botao-texto);
        margin-bottom: 20px;
    }
    #artigo-options button {
        display: block;
        width: 100%;
        padding: 10px;
        margin-bottom: 8px;
        background-color: var(--cor-botao-fundo);
        color: var(--cor-botao-texto);
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-family: 'Source Code Pro', monospace;
        transition: background-color 0.3s ease, color 0.3s ease;
    }
    #artigo-options button:hover:not(:disabled) {
        background-color: var(--cor-botao-hover);
    }
    #artigo-options button:disabled {
        cursor: not-allowed;
        opacity: 0.7;
    }
    #artigo-feedback {
        margin-top: 15px;
        padding: 10px;
        border-radius: 4px;
        min-height: 3em;
        font-weight: normal;
        text-align: left; /* Para melhor leitura da explica√ß√£o */
    }
    #artigo-feedback.correct-explanation {
        color: var(--cor-sucesso);
        background-color: rgba(0, 255, 0, 0.1);
        border: 1px solid var(--cor-sucesso);
    }
    #artigo-feedback.incorrect-explanation {
        color: var(--cor-texto-principal);
        background-color: rgba(255, 102, 102, 0.1);
        border: 1px solid var(--cor-erro);
    }
    #artigo-feedback strong {
        color: var(--cor-destaque); /* Destaque para "Correto!" ou "Incorreto." */
    }
    #artigo-feedback strong.correct-answer-text { /* Destaque para o texto da resposta correta */
        color: var(--cor-sucesso);
    }


  </style>
</head>
<body>
  <div id="authModalOverlay">
    <div id="authModal">
      <span id="closeAuthModal" class="close-modal-button">&times;</span>
      <h2 id="authModalTitle">Bem-vindo, Mestre A√ßougueiro!</h2>
      <p id="authPrompt">Fa√ßa login ou crie uma conta para prosseguir:</p>
      <input type="text" id="usernameInput" placeholder="Seu Nome de Usu√°rio" autocomplete="off" />
      <input type="password" id="passwordInput" placeholder="Sua Senha" autocomplete="current-password" />
      <div id="authError"></div>
      <button id="authSubmit">Entrar</button>
      <button id="registerButton" style="background-color: #008800;">Criar Conta</button>
      </div>
  </div>

  <header>
    <div id="hamburger" aria-label="Menu" role="button" tabindex="0">
      <span></span><span></span><span></span>
    </div>
    <h1 id="butcherCodeTitle" role="button" tabindex="0">ButcherCode</h1>
    <div style="width: 35px;"></div>
  </header>

  <nav id="sidebar" aria-label="Menu lateral">
    <ul class="menu-sections">
      <li class="menu-section">
        <h2 tabindex="0" data-target="bovinosList" data-type="accordion">C√≥digos Bovinos</h2>
        <ul class="subfolder" id="bovinosList"></ul>
      </li>
      <li class="menu-section">
        <h2 tabindex="0" data-target="suinosList" data-type="accordion">C√≥digos Su√≠nos</h2>
        <ul class="subfolder" id="suinosList"></ul>
      </li>
      <li class="menu-section">
        <h2 tabindex="0" data-target="instructionsContent" data-type="accordion">Instru√ß√µes</h2>
        <div class="subfolder" id="instructionsContent">
          <h4>Como Usar o ButcherCode:</h4>
          <p>Bem-vindo! Aqui voc√™ encontra uma ferramenta completa para c√≥digos de produtos de a√ßougue.</p>
          <ul>
              <li><strong>Navega√ß√£o:</strong> Utilize o menu lateral (√≠cone de hamb√∫rguer <i class="fas fa-bars"></i> no canto superior esquerdo) para acessar todas as se√ß√µes.</li>
              <li><strong>Consultar C√≥digos/Produtos:</strong>
                  <ul>
                      <li>Acesse "Terminal de Consulta" no menu.</li>
                      <li>Digite um c√≥digo (ex: "14601") para ver o nome do produto.</li>
                      <li>Digite o nome de um produto (ex: "Ac√©m") para ver o c√≥digo.</li>
                      <li>Voc√™ tamb√©m pode navegar pelas listas de "C√≥digos Bovinos" e "C√≥digos Su√≠nos" no menu para ver os itens e clicar para auto-preencher no terminal.</li>
                  </ul>
              </li>
              <li><strong>GameCode:</strong>
                  <ul>
                      <li>Acesse "GameCode" no menu.</li>
                      <li>Teste seus conhecimentos sobre os c√≥digos! Responda √†s perguntas antes que o tempo acabe.</li>
                  </ul>
              </li>
              <li><strong>O Fascinante Mundo da Carne Bovina:</strong> <ul>
                      <li>Acesse "O Fascinante Mundo da Carne Bovina" no menu.</li>
                      <li>Leia um artigo detalhado e teste seus conhecimentos com um quiz interativo ao final.</li>
                  </ul>
              </li>
              <li><strong>Coment√°rios e Feedback:</strong>
                  <ul>
                      <li>Acesse "Coment√°rios e Feedback" no menu.</li>
                      <li>Veja o que outros usu√°rios est√£o dizendo.</li>
                      <li>Para postar seu pr√≥prio coment√°rio, voc√™ precisa estar logado.</li>
                  </ul>
              </li>
              <li><strong>Meu Perfil (Logado):</strong>
                  <ul>
                      <li>Acesse "Meu Perfil" no menu ap√≥s o login.</li>
                      <li>Visualize seu nome de usu√°rio e identificador de conta.</li>
                      <li>Voc√™ pode alterar seu nome de usu√°rio.</li>
                  </ul>
              </li>
          </ul>

          <h4>Tipos de Usu√°rio e Permiss√µes:</h4>
          <p>O ButcherCode possui diferentes n√≠veis de acesso para garantir a organiza√ß√£o e a qualidade dos dados:</p>
          <ul>
              <li>
                  <strong>ü•© Usu√°rio Comum:</strong>
                  <ul>
                      <li>Consultar c√≥digos e nomes de produtos.</li>
                      <li>Jogar o GameCode e o quiz do artigo.</li> <li>Visualizar coment√°rios.</li>
                      <li>Ap√≥s o login: Postar coment√°rios e gerenciar o pr√≥prio perfil (alterar nome de usu√°rio).</li>
                  </ul>
              </li>
              <li>
                  <strong>üî™ Cooperador (Nome destacado em <span style="color: var(--cor-link); font-weight: bold;">verde claro</span>):</strong>
                  <ul>
                      <li>Todas as permiss√µes de um Usu√°rio Comum.</li>
                      <li>Ap√≥s o login: Adicionar novos produtos (c√≥digo, nome e categoria) atrav√©s da se√ß√£o "Adicionar Produto".</li>
                      <li>Seu nome ter√° um destaque especial nos coment√°rios e na mensagem de boas-vindas.</li>
                  </ul>
              </li>
              <li>
                  <strong>üëë Administrador (Nome destacado em <span class="admin-username" style="color: var(--cor-aviso); font-weight: bold;">amarelo</span>):</strong>
                  <ul>
                      <li>Todas as permiss√µes de um Cooperador.</li>
                      <li>Ap√≥s o login:
                          <ul>
                              <li>Acessar "Gerenciar Produtos (Admin)" para editar (nome, categoria) e excluir produtos existentes. <em>Aten√ß√£o: c√≥digos de produtos n√£o podem ser alterados na edi√ß√£o.</em></li>
                              <li>Excluir coment√°rios de qualquer usu√°rio na se√ß√£o de "Coment√°rios e Feedback".</li>
                          </ul>
                      </li>
                      <li>Seu nome ter√° um destaque especial (ex: <span style="color: var(--cor-aviso); font-weight: bold;">NomeAdmin</span>) nos coment√°rios e em outras √°reas.</li>
                  </ul>
              </li>
          </ul>
          <p>Use o sistema com responsabilidade. Em caso de d√∫vidas ou problemas, deixe um feedback!</p>
        </div>
      </li>
      <li class="menu-section">
        <h2 tabindex="0" data-target="mainTerminalSection" data-type="main-content">Terminal de Consulta</h2>
      </li>
      <li class="menu-section">
        <h2 tabindex="0" data-target="gameCodeSection" data-type="main-content">GameCode</h2>
      </li>
      <li class="menu-section">
        <h2 tabindex="0" data-target="artigoCarneBovinaSection" data-type="main-content">O Fascinante Mundo da Carne Bovina</h2>
      </li>
      <li class="menu-section" id="loginRegisterSidebarItem" style="display:none;">
        <h2 tabindex="0" id="loginRegisterSidebarButton" style="color: var(--cor-link); cursor:pointer; border-bottom: 1px solid var(--cor-link);">Login / Criar Conta</h2>
      </li>
      <li class="menu-section" id="addProductMenuItem" style="display:none;"> <h2 tabindex="0" data-target="addProductSection" data-type="main-content">Adicionar Produto</h2>
      </li>
      <li class="menu-section">
        <h2 tabindex="0" data-target="commentsSection" data-type="main-content">Coment√°rios e Feedback</h2>
      </li>
      <li class="menu-section" id="adminProductManagementMenuItem" style="display:none;"> <h2 tabindex="0" data-target="adminProductManagementSection" data-type="main-content" style="color: var(--cor-aviso);">Gerenciar Produtos (Admin)</h2>
      </li>
       <li class="menu-section" id="userProfileMenuItem" style="display:none;">
        <h2 tabindex="0" data-target="userProfileSection" data-type="main-content">Meu Perfil</h2>
      </li>
      <li class="menu-section" id="logoutSection" style="display:none;">
        <h2 tabindex="0" id="logoutButton" style="color: var(--cor-erro); border-color: var(--cor-erro); cursor:pointer;">Sair (Logout)</h2>
      </li>
    </ul>
  </nav>

  <main class="show-initial">
    <section id="initialScreen" style="text-align: center; padding-top: 50px;">
        <div id="welcomeMessage"></div>
        <div id="loginRegisterInitialScreen" style="display:none; margin-top: 25px; margin-bottom: 25px;">
            <div style="display: flex; justify-content: center; align-items: center; flex-wrap: wrap; gap: 10px; font-size: 1.1rem;">
                <a href="#" id="loginInitialLink" style="color: var(--cor-link); text-decoration: underline; padding: 8px 0;">Fazer Login</a>
                <span style="color: var(--cor-texto-secundario); margin: 0 5px;">ou</span>
                <a href="#" id="registerInitialLink" style="color: var(--cor-link); text-decoration: underline; padding: 8px 0;">Criar Conta</a>
            </div>
            </div>
        <div id="initial-screen-options">
            <button id="accessTerminalButton">Acessar Terminal</button>
            <button id="playGameCodeButton">Jogar GameCode</button>
            <button id="viewCommentsButton">Ver Coment√°rios</button>
        </div>
    </section>

    <section id="mainTerminalSection">
        <label for="inputCode">Terminal ButcherCode</label>
        <div class="input-wrapper">
            <input type="text" id="inputCode" placeholder="Digite c√≥digo ou produto aqui..." autocomplete="off" />
        </div>
        <button id="btnExecute">Executar</button>
        <div id="result" aria-live="polite" role="status"></div>
        <button class="back-to-home-button" id="backToHomeTerminal">Voltar ao In√≠cio</button>
    </section>

    <section id="addProductSection">
        <h2>Adicionar Novo Produto</h2>
        <div class="input-wrapper">
            <label for="inputNewCode">C√≥digo (m√°ximo 5 d√≠gitos):</label>
            <input type="number" id="inputNewCode" placeholder="Ex: 00123" min="0" max="99999" />
        </div>
        <div class="input-wrapper">
            <label for="inputNewName">Nome do Produto:</label>
            <input type="text" id="inputNewName" placeholder="Ex: Fil√© Mignon" />
        </div>
        <div class="input-wrapper">
            <label for="selectNewCategory">Categoria:</label>
            <select id="selectNewCategory">
                <option value="bovinos">Bovinos</option>
                <option value="suinos">Su√≠nos</option>
            </select>
        </div>
        <button id="btnAddNewProduct">Adicionar Produto</button>
        <div id="addProductFeedback" style="margin-top: 15px; font-weight: bold; min-height: 20px;"></div>
        <button class="back-to-home-button" id="backToHomeAddProduct">Voltar ao In√≠cio</button>
    </section>

    <section id="commentsSection">
        <h2>Seus Coment√°rios e Feedback</h2>
        <div class="input-wrapper">
            <label for="commentInput" id="commentLabel">Escreva seu coment√°rio:</label>
            <textarea id="commentInput" placeholder="Digite seu feedback, dicas ou sugest√µes aqui..."></textarea>
        </div>
        <button id="submitCommentButton">Enviar Coment√°rio</button>
        <p id="loginToCommentMessage" style="display:none; text-align:center; margin-bottom:15px; color: var(--cor-aviso);"></p>
        <div id="commentsFeedback"></div>
        <div id="commentsList">
            <p style="text-align: center; color: var(--cor-texto-secundario);">Carregando coment√°rios...</p>
        </div>
        <button class="back-to-home-button" id="backToHomeComments">Voltar ao In√≠cio</button>
    </section>

    <section id="userProfileSection">
        <h2>Meu Perfil</h2>
        <p>Ol√°, <span id="usernameDisplay"></span>!</p>
        <p>Identificador de conta (n√£o √© um email real): <span id="userEmailDisplay"></span></p>
        <p id="adminStatusText" style="color: var(--cor-destaque); font-weight: bold; display: none;">Voc√™ √© um Administrador.</p>
        <button id="editUsernameButton">Alterar Nome de Usu√°rio</button>
        <input type="text" id="newUsernameInput" placeholder="Novo nome de usu√°rio" style="display:none; margin-top: 10px;" />
        <button id="saveUsernameButton" style="display:none;">Salvar Nome de Usu√°rio</button>
        <div id="usernameUpdateFeedback" style="color: var(--cor-sucesso); margin-top: 10px; font-weight: bold;"></div>
        <button class="back-to-home-button" id="backToHomeProfile">Voltar ao In√≠cio</button>
    </section>

    <section id="adminProductManagementSection">
        <h2>Gerenciar Produtos (Admin)</h2>
        <p style="color: var(--cor-aviso); margin-bottom: 15px;">Aten√ß√£o: As exclus√µes de produtos s√£o permanentes. Os c√≥digos n√£o podem ser alterados durante a edi√ß√£o.</p>
        <div id="adminProductManagementFeedback" style="margin-bottom:15px;"></div>
        <h3>Bovinos</h3>
        <ul id="adminBovinosList" class="product-list-admin"><li>Carregando...</li></ul>
        <h3 style="margin-top: 20px;">Su√≠nos</h3>
        <ul id="adminSuinosList" class="product-list-admin"><li>Carregando...</li></ul>
        <button class="back-to-home-button" id="backToHomeAdminProducts">Voltar ao In√≠cio</button>
    </section>


    <section id="gameCodeSection">
        <div id="game-container">
            <div id="game-start-screen">
              <h3>Bem-vindo ao GameCode!</h3>
              <p>Teste seus conhecimentos sobre os c√≥digos de a√ßougue.</p>
              <p>Voc√™ ter√° 15 segundos para responder a cada uma das 20 perguntas.</p>
              <button id="start-game-button">Iniciar Jogo</button>
            </div>

            <div id="game-elements" style="display: none;">
              <div id="question-counter"></div>
              <div id="progress-bar-container">
                <div id="progress-bar"></div>
              </div>
              <div id="timer"></div>
              <div id="question"></div>
              <div id="options"></div>
              <div id="feedback"></div>
              <div id="score-display"></div>
              <button id="next-question">Pr√≥xima Pergunta</button>
              <button id="end-game-button">Finalizar Jogo</button>
            </div>

            <div id="game-end-screen" style="display: none;">
              <h3>Jogo Finalizado!</h3>
              <p id="final-score-message"></p>
              <button id="restart-game-button">Reiniciar Jogo</button>
            </div>
        </div>
        <button class="back-to-home-button" id="backToHomeGame">Voltar ao In√≠cio</button>
    </section>

    <section id="artigoCarneBovinaSection">
        <h2 style="text-align: center; font-size: 1.8rem; margin-bottom: 20px; border-bottom: 1px solid var(--cor-destaque); padding-bottom: 10px;">O Fascinante Mundo da Carne Bovina</h2>
        <article id="conteudoArtigoCarne">
            <h3>O Fascinante Mundo da Carne Bovina: Uma An√°lise Aprofundada</h3>
            <p>A carne bovina transcende a mera nutri√ß√£o; √© um pilar cultural e gastron√¥mico em diversas sociedades, com o Brasil se destacando como um dos maiores produtores e consumidores. A complexidade por tr√°s de um simples bife √© imensa, envolvendo gen√©tica, manejo animal, processos bioqu√≠micos e rigorosas pr√°ticas de beneficiamento. Este artigo aprofunda os aspectos mais espec√≠ficos e detalhados da carne bovina, desde as nuances de seus cortes e tipos at√© a ci√™ncia por tr√°s de sua qualidade e as melhores pr√°ticas de manuseio.</p>
            <h4>I. A Anatomia Bovina e a Magia dos Cortes: Al√©m do B√°sico</h4>
            <p>Cada corte de carne bovina √© uma express√£o √∫nica da fun√ß√£o muscular e da composi√ß√£o tecidual do animal. A sua localiza√ß√£o na carca√ßa e a propor√ß√£o de gordura, m√∫sculo e tecido conjuntivo determinam suas caracter√≠sticas culin√°rias.</p>
            <ul>
                <li><strong>Composi√ß√£o Muscular e Tecido Conjuntivo:</strong> A maciez da carne √© inversamente proporcional √† quantidade de trabalho que o m√∫sculo realiza. Cortes do dianteiro (e.g., m√∫sculo, pesco√ßo, ac√©m) prov√™m de regi√µes de grande movimenta√ß√£o e sustenta√ß√£o de peso. Por isso, possuem fibras musculares mais longas e espessas e um alto teor de col√°geno (um tipo de tecido conjuntivo). O col√°geno, quando submetido a cozimento lento e √∫mido (acima de 70¬∞C), hidrolisa-se e se transforma em gelatina, amaciando a carne e conferindo sucul√™ncia e um sabor mais profundo. Em contrapartida, cortes do traseiro (e.g., fil√© mignon, contrafil√©, alcatra) v√™m de m√∫sculos menos exigidos, resultando em fibras mais curtas, menos col√°geno e maior maciez intr√≠nseca para preparos r√°pidos.</li>
                <li><strong>O Marmoreio (Gordura Intramuscular):</strong> Uma das m√©tricas mais valorizadas na carne de alta qualidade, o marmoreio refere-se √† gordura entremeada nas fibras musculares, vis√≠vel como pequenos veios brancos. Essa gordura, composta principalmente por √°cidos graxos insaturados, possui um baixo ponto de fus√£o. Durante o cozimento, ela se derrete e se distribui pelas fibras, lubrificando-as e contribuindo diretamente para a sucul√™ncia, maciez e um sabor amanteigado e complexo. Ra√ßas como Angus e Wagyu s√£o geneticamente predispostas a um marmoreio superior.</li>
                <li><strong>Nervo e Elastina:</strong> Em contraste com o col√°geno, o que popularmente chamamos de "nervo" na carne s√£o, na verdade, tend√µes ou membranas de elastina. A elastina √© um tecido conjuntivo que, ao contr√°rio do col√°geno, n√£o se dissolve ou amolece significativamente com o calor do cozimento, permanecendo r√≠gida e el√°stica. Por isso, a remo√ß√£o desses "nervos" durante o aparo √© crucial para evitar uma textura indesej√°vel na carne pronta.</li>
            </ul>
            <h4>II. Ra√ßas e Classifica√ß√µes: O Diferencial na Origem</h4>
            <p>A gen√©tica e o manejo do gado s√£o fatores primordiais que influenciam a qualidade final da carne, moldando seu perfil sensorial e nutricional.</p>
            <ul>
                <li><strong>Zebu√≠nos vs. Taurinos:</strong>
                    <ul>
                        <li>Nelore (Zebu√≠no): Predominante no Brasil (80% do rebanho), o Nelore √© valorizado por sua rusticidade, resist√™ncia a parasitas e doen√ßas, e adapta√ß√£o a climas tropicais. Tradicionalmente, a carne Nelore possui menor marmoreio natural e fibras mais longas, resultando em um sabor mais pronunciado de "carne" e uma textura que pode ser mais firme se n√£o for devidamente maturada ou preparada. No entanto, o intenso investimento em melhoramento gen√©tico e t√©cnicas de manejo (e.g., confinamento, dietas controladas) tem revolucionado a qualidade da carne Nelore, produzindo animais mais jovens com melhor acabamento de gordura e maior maciez.</li>
                        <li>Angus (Taurino): Origin√°ria da Esc√≥cia, a ra√ßa Angus (especialmente a Black Angus) √© globalmente reconhecida por sua excelente capacidade de marmoreio. Isso a torna extremamente suculenta, macia e com um sabor mais delicado e caracter√≠stico.</li>
                        <li>Wagyu: Um grupo de ra√ßas japonesas (incluindo as linhagens para o famoso Kobe Beef) geneticamente programadas para o mais alto n√≠vel de marmoreio. A gordura intramuscular do Wagyu tem um ponto de fus√£o muito baixo, resultando em uma carne que literalmente "derrete na boca", com um sabor doce e complexo. O Kobe Beef √© uma marca espec√≠fica de Wagyu com crit√©rios de cria√ß√£o e localiza√ß√£o extremamente rigorosos.</li>
                    </ul>
                </li>
                <li><strong>Novilho Precoce:</strong> Esta classifica√ß√£o refere-se a animais jovens (geralmente abatidos antes dos 24 meses de idade) que atingiram o peso e o acabamento ideal devido a um manejo nutricional e gen√©tico aprimorado. A carne de novilho precoce √© caracterizada por sua maciez superior, fibras mais finas e, muitas vezes, melhor marmoreio, independentemente da ra√ßa, embora seja uma pr√°tica comum em ra√ßas taurinas e nos programas de qualidade Nelore.</li>
            </ul>
            <h4>III. Os Segredos da Maciez: Tipos de Matura√ß√£o da Carne</h4>
            <p>A matura√ß√£o √© um processo natural e controlado de "envelhecimento" da carne ap√≥s o abate. Seu objetivo √© aprimorar significativamente a maciez, sabor e sucul√™ncia do produto final. √â como um bom vinho, que melhora com o tempo! Isso acontece por meio da a√ß√£o de enzimas que j√° existem na pr√≥pria carne, que agem como pequenas "tesouras" biol√≥gicas, quebrando as fibras musculares e o tecido conectivo.</p>
            <h5>1. A Ci√™ncia por Tr√°s do Amaciamento</h5>
            <p>Ap√≥s o abate, o m√∫sculo passa por um est√°gio de enrijecimento (conhecido como rigor mortis). A matura√ß√£o come√ßa quando as enzimas naturalmente presentes na carne, principalmente as calpa√≠nas e, em menor grau, as catepsinas, come√ßam a agir. Elas degradam as prote√≠nas das fibras musculares e o col√°geno, tornando a carne mais tenra. Este processo √© fundamental para que a carne atinja seu potencial m√°ximo de maciez e sabor.</p>
            <h5>2. Tipos de Matura√ß√£o</h5>
            <ul>
                <li><strong>Matura√ß√£o √ömida (Wet-Aged):</strong>
                    <ul>
                        <li>Processo: √â o m√©todo mais comum e eficiente na ind√∫stria. A carne √© embalada a v√°cuo (sem ar) imediatamente ap√≥s a desossa e o resfriamento inicial. Ela permanece refrigerada (geralmente entre 0¬∞C e 4¬∞C) por um per√≠odo que varia de 10 a 28 dias, ou at√© mais.</li>
                        <li>Benef√≠cios: A aus√™ncia de oxig√™nio na embalagem a v√°cuo inibe o crescimento de bact√©rias aer√≥bicas indesejadas, enquanto as enzimas trabalham para amaciar as fibras. A umidade da carne √© retida, resultando em um produto final notavelmente mais macio e suculento. O sabor √© intensificado de forma limpa, sem as notas mais complexas que a matura√ß√£o a seco oferece. Este m√©todo tem pouca perda de peso da carne, o que o torna mais acess√≠vel.</li>
                    </ul>
                </li>
                <li><strong>Matura√ß√£o a Seco (Dry-Aged):</strong>
                    <ul>
                        <li>Processo: Este √© um m√©todo mais artesanal e sofisticado, realizado sem embalagem. Grandes cortes de carne (muitas vezes com osso e uma boa camada de gordura para prote√ß√£o) s√£o pendurados ou armazenados em c√¢maras frias com temperatura, umidade e ventila√ß√£o rigorosamente controladas (temperatura em torno de 0¬∞C a 4¬∞C, umidade relativa entre 75% e 85%, e fluxo de ar constante) por um per√≠odo que pode variar de 21 a mais de 100 dias. Durante esse tempo, forma-se uma "casca" escura e seca na superf√≠cie da carne, que √© removida antes do consumo.</li>
                        <li>Benef√≠cios: Produz uma carne com sabor exclusivo, complexo e concentrado (com notas que podem lembrar nozes, queijo, umami ou at√© manteiga) e uma textura excepcional e maciez superior. A perda controlada de umidade na superf√≠cie da carne faz com que os sabores se concentrem e se intensifiquem, e a a√ß√£o enzim√°tica, por um per√≠odo mais longo, aprofunda a maciez. Embora seja mais caro devido √† perda de peso da carne (a "casca" √© descartada) e aos custos de manuten√ß√£o das c√¢maras, o resultado √© uma experi√™ncia gastron√¥mica √∫nica, valorizada em alta gastronomia.</li>
                    </ul>
                </li>
            </ul>
            <h4>IV. Processos de Beneficiamento: Da Carca√ßa ao Corte Consum√≠vel</h4>
            <p>A transforma√ß√£o da carca√ßa em cortes seguros e de alta qualidade √© um processo multifacetado e altamente regulamentado.</p>
            <ul>
                <li><strong>Abate e Inspe√ß√£o Ante Mortem e Post Mortem:</strong> O processo come√ßa em frigor√≠ficos com licen√ßas do SIF (Servi√ßo de Inspe√ß√£o Federal), que garante o bem-estar animal no pr√©-abate e a inspe√ß√£o da sa√∫de do animal antes (ante mortem) e ap√≥s (post mortem) o abate, garantindo a aus√™ncia de doen√ßas e contaminantes.</li>
                <li><strong>Sangria e Eviscera√ß√£o:</strong> A completa drenagem do sangue (sangria) √© vital para a qualidade e conserva√ß√£o da carne. A eviscera√ß√£o (remo√ß√£o dos √≥rg√£os internos) √© seguida de inspe√ß√£o para identificar quaisquer patologias.</li>
                <li><strong>Esfolamento e Limpeza:</strong> A remo√ß√£o da pele e a lavagem meticulosa da carca√ßa s√£o cruciais para a higiene e a preven√ß√£o da contamina√ß√£o superficial.</li>
                <li><strong>Resfriamento (Pr√©-Resfriamento):</strong> Esta etapa r√°pida e controlada reduz a temperatura da carca√ßa para cerca de 0¬∞C a 4¬∞C. Isso n√£o apenas inibe o crescimento microbiano, mas tamb√©m permite o estabelecimento do rigor mortis de forma controlada, essencial para a posterior matura√ß√£o.</li>
                <li><strong>Divis√£o e Desossa:</strong> A carca√ßa √© dividida em meias, depois em quartos, e ent√£o habilmente desossada. √â aqui que os diferentes cortes prim√°rios s√£o extra√≠dos e padronizados de acordo com as especifica√ß√µes do mercado.</li>
                <li><strong>Aparo (Trimming):</strong> Os cortes s√£o meticulosamente limpos, com a remo√ß√£o de excessos de gordura, nervos e outras imperfei√ß√µes. Isso otimiza a apresenta√ß√£o, o rendimento e a experi√™ncia de consumo.</li>
                <li><strong>Embalagem e Congelamento:</strong>
                    <ul>
                        <li>Embalagem a V√°cuo: O m√©todo mais eficaz para prolongar a vida √∫til, removendo o oxig√™nio e criando um ambiente anaer√≥bico que impede o crescimento da maioria das bact√©rias deterioradoras. √â fundamental para a matura√ß√£o √∫mida.</li>
                        <li>Atmosfera Modificada (MAP): Embalagens que utilizam uma mistura de gases (oxig√™nio, di√≥xido de carbono, nitrog√™nio) para controlar o crescimento microbiano e manter a cor e o frescor da carne por mais tempo.</li>
                        <li>Filme PVC/Bandejas de Isopor: Comum para venda de carne fresca no varejo, o filme √© perme√°vel ao oxig√™nio, mantendo a colora√ß√£o vermelha viva, mas com vida √∫til limitada.</li>
                        <li>Congelamento R√°pido: Cortes destinados a longo armazenamento s√£o submetidos a congelamento r√°pido (a -18¬∞C ou menos), que forma cristais de gelo menores, minimizando o dano celular e preservando a textura.</li>
                    </ul>
                </li>
            </ul>
            <h4>V. Armazenamento Dom√©stico e Seguran√ßa Alimentar: Protegendo a Qualidade</h4>
            <p>A qualidade da carne √© mantida desde a ind√∫stria at√© a casa do consumidor, com a correta manipula√ß√£o e armazenamento sendo essenciais.</p>
            <ul>
                <li><strong>Refrigera√ß√£o √ìtima:</strong> Carne fresca deve ser armazenada entre 0¬∞C e 4¬∞C. Embalagens a v√°cuo lacradas podem ter vida √∫til de semanas a meses, mas, uma vez abertas, a carne deve ser consumida em 2-3 dias. A carne em bandejas comuns deve ser consumida em 1-2 dias.</li>
                <li><strong>Congelamento Profundo:</strong> Para armazenamento prolongado, temperaturas de -18¬∞C ou abaixo s√£o cruciais. Cortes magros podem durar at√© 12 meses, enquanto os mais gordurosos (e a carne mo√≠da) duram de 3-4 meses devido √† oxida√ß√£o da gordura. O uso de embalagens herm√©ticas que eliminam o ar √© fundamental para prevenir a "queimadura por congelamento".</li>
                <li><strong>Descongelamento Seguro:</strong> O m√©todo mais seguro √© descongelar na geladeira, pois a baixa temperatura inibe o crescimento bacteriano. M√©todos mais r√°pidos, como √°gua fria corrente (com a carne embalada e vedada) ou micro-ondas (para cozimento imediato), s√£o alternativas. Jamais descongele carne em temperatura ambiente, pois isso cria uma zona de risco para a prolifera√ß√£o bacteriana. Recongelar carne descongelada (especialmente em temperatura ambiente) √© desaconselh√°vel, pois compromete a qualidade e a seguran√ßa.</li>
                <li><strong>Preven√ß√£o da Contamina√ß√£o Cruzada:</strong> A separa√ß√£o de alimentos crus e cozidos √© imperativa. Utilize t√°buas e utens√≠lios diferentes para carne crua e outros ingredientes, e higienize as m√£os e superf√≠cies que entraram em contato com a carne crua.</li>
            </ul>
            <h4>VI. M√©todos de Preparo da Carne: Da Grelha ao Cozido Lento</h4>
            <p>A escolha do m√©todo de cozimento deve real√ßar as caracter√≠sticas intr√≠nsecas de cada corte, transformando a carne em pratos memor√°veis.</p>
            <ul>
                <li><strong>Grelhados e Churrasco:</strong>
                    <ul>
                        <li>O que √©: Coc√ß√£o em calor direto e intenso (grelha, chapa ou frigideira), focando em uma crosta saborosa por fora e um interior suculento.</li>
                        <li>Cortes ideais: Cortes naturalmente macios ou com bom marmoreio como Picanha, Contrafil√© (Ancho, Chorizo), Fil√© Mignon, Maminha, Alcatra (Miolo/Baby Beef), Fraldinha, Bananinha.</li>
                    </ul>
                </li>
                <li><strong>Assados de Forno:</strong>
                    <ul>
                        <li>O que √©: Pe√ßas inteiras ou grandes peda√ßos de carne assados lentamente no forno, permitindo um cozimento uniforme e o desenvolvimento de sabores.</li>
                        <li>Cortes ideais: Para rosbifes, Fil√© Mignon, Lagarto, Contrafil√©, Miolo da Alcatra. Para outros assados, Maminha, Fraldinha, Ponta de Peito (Brisket), Costela (no forno), Cupim. O controle da temperatura interna (com term√¥metro culin√°rio) √© crucial para o ponto desejado.</li>
                    </ul>
                </li>
                <li><strong>Cozidos e Ensopados:</strong>
                    <ul>
                        <li>O que √©: Coc√ß√£o lenta e prolongada em panela (comum ou de press√£o), com l√≠quidos e temperos, ideal para amaciar cortes mais fibrosos.</li>
                        <li>Cortes ideais: Cortes mais "todo dia" e fibrosos, ricos em col√°geno, que se beneficiam do cozimento longo para amaciar e liberar sabor: M√∫sculo (incluindo Ossobuco), Ac√©m, Paleta, Pesco√ßo, Cox√£o Duro, Costela.</li>
                    </ul>
                </li>
                <li><strong>Carne Mo√≠da:</strong>
                    <ul>
                        <li>O que √©: Vers√°til e pr√°tica, a carne mo√≠da √© a base para molhos, recheios, alm√¥ndegas, hamb√∫rgueres e quibes.</li>
                        <li>Cortes ideais: Praticamente qualquer corte pode ser mo√≠do, mas os mais comuns para o dia a dia s√£o Ac√©m, Patinho, Cox√£o Mole, Cox√£o Duro, Paleta.</li>
                    </ul>
                </li>
                <li><strong>Bifes com Prepara√ß√µes Espec√≠ficas:</strong>
                    <ul>
                        <li>Bife √† Milanesa e √† Parmegiana: Bifes finos, empanados e fritos (Milanesa), que podem ser gratinados com molho e queijo (Parmegiana). Patinho e Cox√£o Mole s√£o ideais.</li>
                        <li>Bife √† Rol√™: Fatias finas de carne (como Cox√£o Mole ou Patinho) recheadas e enroladas, cozidas lentamente em um molho.</li>
                        <li>Picadinho: Carne cortada em cubos pequenos e cozida em molho, perfeita para refei√ß√µes r√°pidas e saborosas. Patinho e Cox√£o Mole s√£o bons cortes.</li>
                    </ul>
                </li>
            </ul>
            <h5>Conclus√£o: Uma Aprecia√ß√£o Culin√°ria e Cient√≠fica</h5>
            <p>A carne bovina, em sua complexidade, oferece uma vasta gama de possibilidades culin√°rias. A matura√ß√£o, com sua base bioqu√≠mica de a√ß√£o enzim√°tica controlada, √© um testemunho da ci√™ncia aplicada √† gastronomia, elevando a maciez e o sabor a novos patamares. J√° a diversidade de m√©todos de preparo, desde o controle de temperatura de um rosbife impec√°vel at√© a transforma√ß√£o de cortes fibrosos em pratos que desmancham na boca, demonstra a arte e o cuidado necess√°rios para transformar a mat√©ria-prima em uma experi√™ncia gastron√¥mica memor√°vel. Entender esses detalhes aprofundados n√£o s√≥ aprimora as habilidades na cozinha, mas tamb√©m aumenta o apre√ßo por cada pe√ßa de carne que chega √† nossa mesa.</p>
        </article>

        <div id="testeConhecimentoArtigo">
            <div id="artigo-game-start-screen">
              <h3>Teste seus Conhecimentos sobre Carne Bovina!</h3>
              <p>Pronto para testar o que aprendeu? S√£o 50 perguntas para aprofundar seus conhecimentos.</p>
              <p style="font-size: 0.9em; margin-top: 10px;">Responda no seu tempo. Ao final de cada pergunta, voc√™ ver√° a explica√ß√£o.</p>
              <button id="start-artigo-test-button" style="padding: 15px 30px; font-size: 1.3rem; margin-top:15px;">Iniciar Teste</button>
            </div>

            <div id="artigo-game-elements" style="display: none;">
              <div id="artigo-question-counter" style="font-size: 0.9em; color: var(--cor-texto-secundario); margin-bottom: 10px;"></div>
              <div id="artigo-question" style="font-size: 1.1rem; margin-bottom: 20px; min-height: 3em;"></div>
              <div id="artigo-options" style="margin-bottom: 20px;"></div>
              <div id="artigo-feedback"></div>
              <div id="artigo-score-display" style="margin-top: 15px; font-weight: bold; font-size: 1.05rem; min-height: 1.5em;"></div>
              <button id="artigo-next-question" style="display: none; margin-top:15px; padding: 10px 20px; background-color: var(--cor-botao-fundo);">Pr√≥xima Pergunta</button>
              <button id="artigo-end-test-button" style="margin-top:15px; padding: 10px 20px; background-color: var(--cor-critico); color: #fff;">Finalizar Teste</button>
            </div>

            <div id="artigo-game-end-screen" style="display: none; padding: 20px;">
              <h3 style="font-size: 1.8rem; color: var(--cor-botao-texto); margin-bottom: 20px;">Teste Finalizado!</h3>
              <p id="artigo-final-score-message" style="font-size: 1.2rem; margin-bottom: 20px;"></p>
              <button id="artigo-restart-test-button" style="padding: 15px 30px; font-size: 1.3rem;">Reiniciar Teste</button>
            </div>
        </div>
        <button class="back-to-home-button" id="backToHomeArtigoCarne">Voltar ao In√≠cio</button>
    </section>

  </main>

<script type="module">
  // --- IMPORTANTE: ATEN√á√ÉO √Ä SEGURAN√áA! ---
  // As chaves de API e IDs de Pantry/Firebase est√£o diretamente no c√≥digo do frontend.
  // Para Firebase: Use Regras de Seguran√ßa MUITO R√çGIDAS.
  // Para Pantry (para escrita por admins/cooperadores): A√ß√µes de escrita s√£o feitas diretamente pelo cliente.
  // Para maior seguran√ßa, use um backend (Cloud Functions) como intermedi√°rio para validar
  // o papel do usu√°rio e interagir com o Pantry.

  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.8.1/firebase-app.js";
  import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.8.1/firebase-auth.js";
  import { getFirestore, collection, addDoc, getDocs, query, orderBy, limit, doc, getDoc, updateDoc, setDoc, serverTimestamp, where, deleteDoc } from "https://www.gstatic.com/firebasejs/11.8.1/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyCenbkggBbZmkc8ULS--1iL0KIsm4Flmpk", // ATEN√á√ÉO: SUBSTITUA PELA SUA CHAVE REAL SE FOR USAR EM PRODU√á√ÉO E PROTEJA-A!
    authDomain: "butchercode-4e998.firebaseapp.com",
    projectId: "butchercode-4e998",
    storageBucket: "butchercode-4e998.firebasestorage.app",
    messagingSenderId: "535961032533",
    appId: "1:535961032533:web:de1ad79b53c18f125d01dc"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);

  document.addEventListener('DOMContentLoaded', () => {
    const authModalOverlay = document.getElementById('authModalOverlay');
    const authModalTitle = document.getElementById('authModalTitle');
    const authPrompt = document.getElementById('authPrompt');
    const passwordInput = document.getElementById('passwordInput');
    const usernameInputDOM = document.getElementById('usernameInput');
    const authSubmit = document.getElementById('authSubmit');
    const registerButton = document.getElementById('registerButton');
    const authError = document.getElementById('authError');
    const closeAuthModalButton = document.getElementById('closeAuthModal');

    const welcomeMessage = document.getElementById('welcomeMessage');
    const initialScreenOptions = document.getElementById('initial-screen-options');
    const butcherCodeTitle = document.getElementById('butcherCodeTitle');
    const logoutSection = document.getElementById('logoutSection');
    const logoutButton = document.getElementById('logoutButton');
    const userProfileMenuItem = document.getElementById('userProfileMenuItem');

    const loginRegisterSidebarItem = document.getElementById('loginRegisterSidebarItem');
    const loginRegisterSidebarButton = document.getElementById('loginRegisterSidebarButton');
    const loginRegisterInitialScreen = document.getElementById('loginRegisterInitialScreen');
    const loginInitialLink = document.getElementById('loginInitialLink');
    const registerInitialLink = document.getElementById('registerInitialLink');

    const userProfileSection = document.getElementById('userProfileSection');
    const usernameDisplay = document.getElementById('usernameDisplay');
    const userEmailDisplay = document.getElementById('userEmailDisplay');
    const editUsernameButton = document.getElementById('editUsernameButton');
    const newUsernameInput = document.getElementById('newUsernameInput');
    const saveUsernameButton = document.getElementById('saveUsernameButton');
    const usernameUpdateFeedback = document.getElementById('usernameUpdateFeedback');
    const adminStatusText = document.getElementById('adminStatusText');

    const mainTerminalSection = document.getElementById('mainTerminalSection');
    const inputCode = document.getElementById('inputCode');
    const btnExecute = document.getElementById('btnExecute');
    const resultDiv = document.getElementById('result');
    const bovinosList = document.getElementById('bovinosList');
    const suinosList = document.getElementById('suinosList');

    const addProductSectionDOM = document.getElementById('addProductSection');
    const inputNewCode = document.getElementById('inputNewCode');
    const inputNewName = document.getElementById('inputNewName');
    const selectNewCategory = document.getElementById('selectNewCategory');
    const btnAddNewProduct = document.getElementById('btnAddNewProduct');
    const addProductFeedback = document.getElementById('addProductFeedback');
    const backToHomeAddProductButton = document.getElementById('backToHomeAddProduct');
    const addProductSectionTitle = document.querySelector('#addProductSection h2');

    const commentsSectionDOM = document.getElementById('commentsSection');
    const commentLabel = document.getElementById('commentLabel');
    const commentInput = document.getElementById('commentInput');
    const submitCommentButton = document.getElementById('submitCommentButton');
    const commentsFeedback = document.getElementById('commentsFeedback');
    const commentsList = document.getElementById('commentsList');
    const loginToCommentMessage = document.getElementById('loginToCommentMessage');
    const backToHomeCommentsButton = document.getElementById('backToHomeComments');

    const mainContent = document.querySelector('main');
    const hamburger = document.getElementById('hamburger');
    const sidebar = document.getElementById('sidebar');
    const sidebarTitles = document.querySelectorAll('#sidebar h2');
    const initialScreen = document.getElementById('initialScreen');

    const backToHomeTerminalButton = document.getElementById('backToHomeTerminal');
    const backToHomeGameButton = document.getElementById('backToHomeGame');
    const backToHomeProfileButton = document.getElementById('backToHomeProfile');
    const accessTerminalButton = document.getElementById('accessTerminalButton');
    const playGameCodeButton = document.getElementById('playGameCodeButton');
    const viewCommentsButton = document.getElementById('viewCommentsButton');

    const gameCodeSection = document.getElementById('gameCodeSection');
    const gameStartScreen = document.getElementById('game-start-screen');
    const gameEndScreen = document.getElementById('game-end-screen');
    const gameElements = document.getElementById('game-elements');
    const startGameButton = document.getElementById('start-game-button');
    const restartGameButton = document.getElementById('restart-game-button');
    const questionElement = document.getElementById('question');
    const optionsElement = document.getElementById('options');
    const feedbackElement = document.getElementById('feedback');
    const scoreDisplayElement = document.getElementById('score-display');
    const nextQuestionButton = document.getElementById('next-question');
    const progressBar = document.getElementById('progress-bar');
    const timerElement = document.getElementById('timer');
    const questionCounterElement = document.getElementById('question-counter');
    const finalScoreMessage = document.getElementById('final-score-message');
    const endGameButton = document.getElementById('end-game-button');

    const adminProductManagementMenuItem = document.getElementById('adminProductManagementMenuItem');
    const adminProductManagementSection = document.getElementById('adminProductManagementSection');
    const adminBovinosList = document.getElementById('adminBovinosList');
    const adminSuinosList = document.getElementById('adminSuinosList');
    const adminProductManagementFeedback = document.getElementById('adminProductManagementFeedback');
    const backToHomeAdminProductsButton = document.getElementById('backToHomeAdminProducts');

    let currentUser = null;
    let isCurrentUserAdmin = false;
    let currentUserRole = 'user';
    let activeAccordionItem = null;
    const PANTRY_ID = '4f7072cc-f2b3-4852-a675-8fa440048289';
    const BASKET_NAME = 'butcher_products';
    let productData = { bovinos: {}, suinos: {}, meta: { version: 1, last_updated: "" } };
    let productsInverseNormalized = {};
    const GAME_STATE_KEY = "game_code_state";
    const TIME_PER_QUESTION = 15;
    let timeLeft, timerInterval, tickSoundInterval;
    let currentQuestionIndex = 0, score = 0, questions = [];

    const sounds = {
        correct: new Audio('images/sounds/correct.mp3'),
        incorrect: new Audio('images/sounds/incorrect.mp3'),
        gameStart: new Audio('images/sounds/game-start.mp3'),
        gameEnd: new Audio('images/sounds/game-end.mp3'),
        tick: new Audio('images/sounds/tick.mp3'),
        terminalSuccess: new Audio('images/sounds/terminal-success.mp3'),
        terminalError: new Audio('images/sounds/terminal-error.mp3')
    };

    // >>> IN√çCIO DAS NOVAS CONSTANTES E VARI√ÅVEIS PARA O TESTE DO ARTIGO <<<
    const artigoCarneBovinaSection = document.getElementById('artigoCarneBovinaSection');
    const startArtigoTestButton = document.getElementById('start-artigo-test-button');
    const artigoGameStartScreen = document.getElementById('artigo-game-start-screen');
    const artigoGameElements = document.getElementById('artigo-game-elements');
    const artigoGameEndScreen = document.getElementById('artigo-game-end-screen');
    const artigoQuestionCounterElement = document.getElementById('artigo-question-counter');
    const artigoQuestionElement = document.getElementById('artigo-question');
    const artigoOptionsElement = document.getElementById('artigo-options');
    const artigoFeedbackElement = document.getElementById('artigo-feedback');
    const artigoScoreDisplayElement = document.getElementById('artigo-score-display');
    const artigoNextQuestionButton = document.getElementById('artigo-next-question');
    const artigoEndTestButton = document.getElementById('artigo-end-test-button');
    const artigoFinalScoreMessage = document.getElementById('artigo-final-score-message');
    const artigoRestartTestButton = document.getElementById('artigo-restart-test-button');
    const backToHomeArtigoCarneButton = document.getElementById('backToHomeArtigoCarne');


    let currentArtigoQuestionIndex = 0;
    let artigoScore = 0;
    let artigoQuestionsAnswered = 0;
    let perguntasArtigoCarneBovina = [];

    const dadosPerguntasArtigo = [
        { pergunta: "Qual √© o corte bovino universalmente reconhecido como o mais macio do boi, ideal para medalh√µes e rosbifes?", alternativas: ["Picanha", "Contrafil√©", "Fil√© Mignon", "Maminha"], respostaCorreta: "Fil√© Mignon", explicacao: "O Fil√© Mignon √© o m√∫sculo menos trabalhado do boi, resultando em fibras muito finas e pouca gordura, o que lhe confere maciez excepcional." },
        { pergunta: "Qual componente do tecido conjuntivo se dissolve e se transforma em gelatina, amaciando a carne durante o cozimento lento e √∫mido?", alternativas: ["Elastina", "Gordura intramuscular", "Col√°geno", "Prote√≠na miofibrilar"], respostaCorreta: "Col√°geno", explicacao: "O col√°geno, presente em maior quantidade em cortes mais fibrosos, √© o principal tecido conjuntivo que se hidrolisa em gelatina com calor √∫mido prolongado, tornando a carne macia." },
        { pergunta: "Qual termo se refere √† gordura entremeada nas fibras musculares da carne, contribuindo para sua sucul√™ncia e sabor?", alternativas: ["Nervo", "Rigor mortis", "Marmoreio", "Tend√£o"], respostaCorreta: "Marmoreio", explicacao: "O marmoreio √© a gordura intramuscular que se apresenta como veios brancos. Sua presen√ßa √© um indicador de qualidade, pois ela derrete no cozimento, adicionando sucul√™ncia e sabor." },
        { pergunta: "Qual ra√ßa bovina √© predominante no rebanho brasileiro e conhecida por sua rusticidade e adapta√ß√£o a climas tropicais?", alternativas: ["Angus", "Hereford", "Wagyu", "Nelore"], respostaCorreta: "Nelore", explicacao: "O Nelore √© a ra√ßa zebu√≠na mais representativa no Brasil, adaptada √†s condi√ß√µes tropicais do pa√≠s e base da pecu√°ria de corte nacional." },
        { pergunta: "O que a matura√ß√£o √∫mida (Wet-Aged) da carne envolve?", alternativas: ["Exposi√ß√£o da carne ao ar em c√¢maras controladas.", "Embalagem da carne a v√°cuo e refrigera√ß√£o.", "Congelamento r√°pido da carne ap√≥s o abate.", "Cura da carne com sal e especiarias."], respostaCorreta: "Embalagem da carne a v√°cuo e refrigera√ß√£o.", explicacao: "Na matura√ß√£o √∫mida, a carne √© selada a v√°cuo para que as enzimas ajam em um ambiente sem oxig√™nio, promovendo o amaciamento e a reten√ß√£o de umidade." },
        { pergunta: "Qual tipo de matura√ß√£o resulta em sabores mais complexos e concentrados, com notas que podem lembrar nozes ou queijo?", alternativas: ["Matura√ß√£o √ömida", "Congelamento", "Dry-Aged", "Curetage"], respostaCorreta: "Dry-Aged", explicacao: "A matura√ß√£o a seco (Dry-Aged), ao expor a carne ao ar em condi√ß√µes controladas, permite a desidrata√ß√£o e o desenvolvimento de sabores √∫nicos e complexos, al√©m de uma maciez excepcional." },
        { pergunta: "Qual √≥rg√£o brasileiro √© respons√°vel pela inspe√ß√£o sanit√°ria da carne nos frigor√≠ficos?", alternativas: ["ANVISA", "IBAMA", "MAPA", "SIF"], respostaCorreta: "SIF", explicacao: "O Servi√ßo de Inspe√ß√£o Federal (SIF) √© o √≥rg√£o do Minist√©rio da Agricultura, Pecu√°ria e Abastecimento (MAPA) respons√°vel por fiscalizar a qualidade e seguran√ßa dos produtos de origem animal." },
        { pergunta: "Qual √© a temperatura ideal de refrigera√ß√£o para a carne fresca para inibir o crescimento bacteriano?", alternativas: ["5¬∞C a 10¬∞C", "0¬∞C a 4¬∞C", "-5¬∞C a 0¬∞C", "10¬∞C a 15¬∞C"], respostaCorreta: "0¬∞C a 4¬∞C", explicacao: "Manter a carne nesta faixa de temperatura √© crucial para retardar a prolifera√ß√£o da maioria das bact√©rias e manter a carne segura." },
        { pergunta: "Por que n√£o √© recomendado descongelar carne bovina em temperatura ambiente?", alternativas: ["A carne perde o sabor.", "O crescimento bacteriano acelera na superf√≠cie.", "A carne fica muito seca.", "A carne fica dura."], respostaCorreta: "O crescimento bacteriano acelera na superf√≠cie.", explicacao: "A temperatura ambiente permite que a superf√≠cie da carne entre rapidamente na \"zona de perigo\" de temperatura, onde as bact√©rias se multiplicam rapidamente, aumentando o risco de doen√ßas." },
        { pergunta: "Qual corte bovino √© um cl√°ssico para \"carne louca\" e rosbife, conhecido por seu formato cil√≠ndrico e por ser magro?", alternativas: ["Maminha", "Fraldinha", "Lagarto", "Cox√£o Mole"], respostaCorreta: "Lagarto", explicacao: "O Lagarto √© um corte magro e cil√≠ndrico que se presta muito bem a assados inteiros como rosbife e tamb√©m pode ser desfiado para \"carne louca\"." },
        { pergunta: "O que √© o \"nervo\" na carne, no contexto culin√°rio?", alternativas: ["Uma fibra muscular muito longa.", "Tend√µes ou membranas de tecido conjuntivo denso que n√£o amolecem com o calor.", "Um tipo de gordura intermuscular.", "Uma veia ou art√©ria do animal."], respostaCorreta: "Tend√µes ou membranas de tecido conjuntivo denso que n√£o amolecem com o calor.", explicacao: "Diferente do col√°geno, o que popularmente se chama de \"nervo\" s√£o tend√µes ou membranas de elastina, que permanecem r√≠gidas e podem prejudicar a textura se n√£o forem removidas." },
        { pergunta: "Qual √© a principal caracter√≠stica da carne de \"Novilho Precoce\"?", alternativas: ["√â sempre de ra√ßa Nelore.", "√â de animais mais velhos e robustos.", "√â de animais jovens com carne mais macia e fibras finas.", "√â uma carne exclusiva para exporta√ß√£o."], respostaCorreta: "√â de animais jovens com carne mais macia e fibras finas.", explicacao: "Novilho Precoce refere-se a animais jovens que atingem o peso de abate mais cedo devido ao manejo aprimorado, resultando em uma carne naturalmente mais macia e de melhor qualidade." },
        { pergunta: "Para um rosbife, qual a temperatura interna ideal para um ponto malpassado (rare), ao retirar do forno?", alternativas: ["65¬∞C a 70¬∞C", "52¬∞C a 55¬∞C", "70¬∞C a 75¬∞C", "45¬∞C a 50¬∞C"], respostaCorreta: "52¬∞C a 55¬∞C", explicacao: "Para um rosbife malpassado, a carne deve ser retirada do forno quando o term√¥metro atingir esta faixa, permitindo o cozimento residual e um centro rosado e suculento." },
        { pergunta: "Qual √© o benef√≠cio de deixar o rosbife descansar por alguns minutos ap√≥s sair do forno?", alternativas: ["Para a carne esfriar mais r√°pido.", "Para as fibras se contra√≠rem e a carne ficar mais firme.", "Para os sucos se redistribu√≠rem pelas fibras, garantindo mais sucul√™ncia.", "Para a crosta ficar mais crocante."], respostaCorreta: "Para os sucos se redistribu√≠rem pelas fibras, garantindo mais sucul√™ncia.", explicacao: "O descanso permite que os sucos, que se concentraram no centro da pe√ßa durante o cozimento, se espalhem novamente por toda a carne, resultando em um rosbife mais suculento ao ser fatiado." },
        { pergunta: "Qual corte bovino √© um dos campe√µes de versatilidade e custo-benef√≠cio para o dia a dia, bom para carne mo√≠da e ensopados?", alternativas: ["Fil√© Mignon", "Picanha", "Ac√©m", "Ancho"], respostaCorreta: "Ac√©m", explicacao: "O Ac√©m √© um corte do dianteiro, muito vers√°til e econ√¥mico, ideal para uma variedade de pratos cotidianos devido √† sua boa textura e sabor." },
        { pergunta: "Qual √© a principal caracter√≠stica da carne Wagyu que a torna t√£o valorizada?", alternativas: ["Sua resist√™ncia a doen√ßas.", "Seu alto teor de col√°geno.", "Seu excepcional marmoreio.", "Seu baixo custo de produ√ß√£o."], respostaCorreta: "Seu excepcional marmoreio.", explicacao: "A carne Wagyu √© famosa mundialmente pelo seu intenso marmoreio, que confere uma maciez, sucul√™ncia e sabor √∫nicos." },
        { pergunta: "Qual processo de beneficiamento da carne bovina envolve a remo√ß√£o da pele do animal?", alternativas: ["Eviscera√ß√£o", "Sangria", "Esfolamento", "Desossa"], respostaCorreta: "Esfolamento", explicacao: "O esfolamento √© a etapa onde a pele do animal √© removida, preparando a carca√ßa para as pr√≥ximas fases de processamento." },
        { pergunta: "A carne \"fibrosa\" se beneficia mais de qual tipo de cozimento para amaciar?", alternativas: ["Grelhado r√°pido", "Fritura por imers√£o", "Cozimento lento e √∫mido", "Assado em alta temperatura"], respostaCorreta: "Cozimento lento e √∫mido", explicacao: "Cortes fibrosos, ricos em col√°geno, exigem cozimento lento e √∫mido para que o col√°geno se transforme em gelatina, amaciando a carne e liberando sabor." },
        { pergunta: "Qual corte bovino √© ideal para a tradicional \"rabada\"?", alternativas: ["Lagarto", "Cox√£o Mole", "Rabo", "Maminha"], respostaCorreta: "Rabo", explicacao: "O Rabo bovino √© o ingrediente cl√°ssico da rabada, um prato que se beneficia do longo cozimento para amaciar o col√°geno e liberar o sabor caracter√≠stico." },
        { pergunta: "Qual a principal diferen√ßa entre matura√ß√£o √∫mida e matura√ß√£o a seco, em termos de sabor?", alternativas: ["Sabor id√™ntico, apenas a t√©cnica muda.", "Matura√ß√£o √∫mida tem sabor mais complexo; a seco √© mais simples.", "Matura√ß√£o a seco desenvolve sabores mais complexos e intensos.", "Matura√ß√£o √∫mida √© mais doce; a seco √© mais salgada."], respostaCorreta: "Matura√ß√£o a seco desenvolve sabores mais complexos e intensos.", explicacao: "A matura√ß√£o a seco, devido √† desidrata√ß√£o controlada e processos de oxida√ß√£o, concentra e complexifica os sabores da carne de forma mais pronunciada do que a matura√ß√£o √∫mida." },
        { pergunta: "Qual o objetivo da \"sangria\" no processo de abate?", alternativas: ["Remover a pele do animal.", "Drenar completamente o sangue da carca√ßa para qualidade e conserva√ß√£o.", "Inspecionar a sa√∫de do animal.", "Resfriar a carca√ßa rapidamente."], respostaCorreta: "Drenar completamente o sangue da carca√ßa para qualidade e conserva√ß√£o.", explicacao: "A sangria completa √© vital para a higiene e a durabilidade da carne, pois a presen√ßa de sangue nos tecidos pode acelerar a deteriora√ß√£o." },
        { pergunta: "O que significa o termo \"carne todo dia\"?", alternativas: ["Cortes nobres para ocasi√µes especiais.", "Cortes comuns, vers√°teis e geralmente mais acess√≠veis para o consumo di√°rio.", "Carne que deve ser consumida imediatamente ap√≥s a compra.", "Carne congelada para uso frequente."], respostaCorreta: "Cortes comuns, vers√°teis e geralmente mais acess√≠veis para o consumo di√°rio.", explicacao: "\"Carne todo dia\" √© uma express√£o popular para cortes como ac√©m, patinho e cox√£o mole, que s√£o econ√¥micos e adapt√°veis a diversas receitas cotidianas." },
        { pergunta: "Qual corte bovino √© ideal para o \"bife √† milanesa\" e \"bife √† parmegiana\"?", alternativas: ["Costela", "Lagarto", "Patinho", "Cupim"], respostaCorreta: "Patinho", explicacao: "O Patinho √© um corte magro e macio que pode ser facilmente afinado para ser empanado e frito, resultando em bifes milanesa ou parmegiana de √≥tima qualidade." },
        { pergunta: "Qual a temperatura ideal para o congelamento profundo da carne bovina?", alternativas: ["0¬∞C", "-5¬∞C", "-18¬∞C ou abaixo", "-10¬∞C"], respostaCorreta: "-18¬∞C ou abaixo", explicacao: "Esta temperatura √© o padr√£o para congelamento eficiente, minimizando a forma√ß√£o de grandes cristais de gelo e preservando a qualidade da carne por mais tempo." },
        { pergunta: "Por que √© importante embalar a carne a v√°cuo ao congelar em casa?", alternativas: ["Para a carne cozinhar mais r√°pido.", "Para adicionar sabor √† carne.", "Para evitar a \"queimadura por congelamento\" (desidrata√ß√£o).", "Para deixar a carne mais fibrosa."], respostaCorreta: "Para evitar a \"queimadura por congelamento\" (desidrata√ß√£o).", explicacao: "A embalagem a v√°cuo elimina o ar e previne a desidrata√ß√£o da superf√≠cie da carne, que causa as manchas secas e descoloridas da queimadura por congelamento." },
        { pergunta: "Qual √© o processo em que enzimas naturais da carne atuam, quebrando fibras musculares e o col√°geno, resultando em maior maciez e sabor?", alternativas: ["Cozimento", "Marinada", "Matura√ß√£o", "Selagem"], respostaCorreta: "Matura√ß√£o", explicacao: "A matura√ß√£o √© o processo bioqu√≠mico p√≥s-abate onde as enzimas da pr√≥pria carne degradam as prote√≠nas e o col√°geno, amaciando-a e desenvolvendo seu sabor." },
        { pergunta: "Qual corte bovino √© rico em col√°geno e √© a base para caldos e sopas, al√©m de ser o \"Ossobuco\" quando cortado com o osso?", alternativas: ["Contrafil√©", "M√∫sculo", "Picanha", "Fraldinha"], respostaCorreta: "M√∫sculo", explicacao: "O M√∫sculo, tanto dianteiro quanto traseiro, √© um corte com alto teor de col√°geno, que se dissolve em gelatina com cozimento longo, enriquecendo caldos e ensopados e tornando a carne muito macia." },
        { pergunta: "Qual m√©todo de descongelamento √© considerado o mais seguro para a carne bovina?", alternativas: ["Em temperatura ambiente.", "Em √°gua quente.", "Na geladeira.", "No micro-ondas e deixar no balc√£o."], respostaCorreta: "Na geladeira.", explicacao: "Descongelar na geladeira mant√©m a carne em uma temperatura segura (abaixo de 5¬∞C) durante todo o processo, inibindo o crescimento bacteriano." },
        { pergunta: "O que s√£o as calpa√≠nas no contexto da matura√ß√£o da carne?", alternativas: ["Um tipo de bact√©ria prejudicial.", "Enzimas que endurecem a carne.", "Enzimas proteases que degradam as fibras musculares e amaciam a carne.", "Um tipo de gordura da carne."], respostaCorreta: "Enzimas proteases que degradam as fibras musculares e amaciam a carne.", explicacao: "As calpa√≠nas s√£o enzimas end√≥genas cruciais no processo de matura√ß√£o, respons√°veis por quebrar as prote√≠nas miofibrilares, o que aumenta a maciez da carne." },
        { pergunta: "Qual √© o principal problema ao recongelar carne que j√° foi descongelada em temperatura ambiente?", alternativas: ["A carne n√£o mudar√° de cor.", "O sabor da carne ser√° aprimorado.", "Aumenta o risco de prolifera√ß√£o bacteriana e compromete a qualidade.", "A carne ficar√° mais macia."], respostaCorreta: "Aumenta o risco de prolifera√ß√£o bacteriana e compromete a qualidade.", explicacao: "O descongelamento em temperatura ambiente permite o crescimento de bact√©rias. Recongelar n√£o mata essas bact√©rias e, ao descongelar novamente, elas podem atingir n√≠veis perigosos." },
        { pergunta: "Qual √© o corte bovino que possui uma protuber√¢ncia na parte superior do pesco√ßo, rica em gordura e col√°geno, muito apreciada em churrascos de longo cozimento?", alternativas: ["Pesco√ßo", "Cupim", "Ac√©m", "Ponta de Peito"], respostaCorreta: "Cupim", explicacao: "O Cupim √© um corte caracter√≠stico de ra√ßas zebu√≠nas, como o Nelore, e √© conhecido por sua riqueza em gordura e col√°geno que se torna incrivelmente macia ap√≥s cozimento lento." },
        { pergunta: "O que indica o termo \"Carne Grill\" em rela√ß√£o a um corte bovino?", alternativas: ["Que a carne deve ser cozida lentamente na panela.", "Que √© um corte ideal para preparo r√°pido na grelha ou chapa.", "Que a carne √© exclusivamente para assados de forno.", "Que a carne precisa ser mo√≠da antes do preparo."], respostaCorreta: "Que √© um corte ideal para preparo r√°pido na grelha ou chapa.", explicacao: "\"Carne Grill\" refere-se a cortes que s√£o naturalmente macios e se prestam bem a cozimentos r√°pidos em alta temperatura, como o churrasco, para desenvolver uma crosta e manter a sucul√™ncia." },
        { pergunta: "Qual dos seguintes m√©todos de preparo √© mais adequado para cortes mais fibrosos, como o M√∫sculo e o Pesco√ßo?", alternativas: ["Grelhar rapidamente", "Fritar por imers√£o", "Cozimento lento e √∫mido (ensopados, panela de press√£o)", "Assar em alta temperatura por pouco tempo"], respostaCorreta: "Cozimento lento e √∫mido (ensopados, panela de press√£o)", explicacao: "Cortes fibrosos cont√™m muito col√°geno, que s√≥ amolece e se transforma em gelatina com calor √∫mido e prolongado, tornando a carne tenra." },
        { pergunta: "Qual o objetivo da \"contamina√ß√£o cruzada\"?", alternativas: ["Transferir sabores entre alimentos.", "Prevenir a transfer√™ncia de bact√©rias de alimentos crus para outros.", "Transferir bact√©rias de alimentos crus para outros alimentos.", "Aumentar a vida √∫til dos alimentos."], respostaCorreta: "Transferir bact√©rias de alimentos crus para outros alimentos.", explicacao: "A contamina√ß√£o cruzada √© a transfer√™ncia indesejada de microrganismos de um alimento (geralmente cru) para outro (especialmente pronto para consumo), atrav√©s de superf√≠cies ou utens√≠lios. A preven√ß√£o √© o objetivo, n√£o a contamina√ß√£o em si." },
        { pergunta: "Qual corte bovino √© um cl√°ssico para assados lentos de panela e ensopados, conhecido por suas fibras longas, mas que fica macio ap√≥s cozimento prolongado?", alternativas: ["Fil√© Mignon", "Lagarto", "Fraldinha", "Costela"], respostaCorreta: "Costela", explicacao: "A Costela, com suas fibras longas e bastante gordura e col√°geno, √© ideal para cozimentos lentos (no forno, panela de press√£o ou churrasco demorado), que a tornam incrivelmente macia e saborosa." },
        { pergunta: "O que √© a \"Bananinha\" no contexto dos cortes bovinos?", alternativas: ["Uma parte da alcatra.", "Um corte entre os ossos da costela, √≥timo para churrasco.", "Um corte do dianteiro para carne mo√≠da.", "Uma pe√ßa de carne mo√≠da com formato espec√≠fico."], respostaCorreta: "Um corte entre os ossos da costela, √≥timo para churrasco.", explicacao: "A Bananinha √© um corte pequeno e saboroso, retirado do espa√ßo entre as costelas, que se presta muito bem ao churrasco devido √† sua gordura e cozimento r√°pido." },
        { pergunta: "Qual o benef√≠cio do uso da embalagem a v√°cuo para a carne?", alternativas: ["Aumentar a prolifera√ß√£o de bact√©rias.", "Alterar a cor da carne para mais escura.", "Prolongar a vida √∫til e permitir a matura√ß√£o √∫mida.", "Adicionar sabor artificial √† carne."], respostaCorreta: "Prolongar a vida √∫til e permitir a matura√ß√£o √∫mida.", explicacao: "A embalagem a v√°cuo remove o oxig√™nio, inibindo o crescimento de bact√©rias aer√≥bicas e criando um ambiente ideal para as enzimas agirem no processo de matura√ß√£o √∫mida, al√©m de aumentar a durabilidade." },
        { pergunta: "O que acontece com a carne \"fibrosa\" quando cozida lentamente em calor √∫mido?", alternativas: ["Ela se torna mais r√≠gida e seca.", "Ela se dissolve e se transforma em gelatina, tornando-a macia.", "Ela perde todo o seu sabor.", "Ela fica com sabor amargo."], respostaCorreta: "Ela se dissolve e se transforma em gelatina, tornando-a macia.", explicacao: "O calor √∫mido prolongado atua sobre o col√°geno das fibras, transformando-o em gelatina, o que amacia a carne fibrosa." },
        { pergunta: "Qual a principal caracter√≠stica da carne de \"Novilho Precoce\" em termos de qualidade?", alternativas: ["√â sempre de ra√ßas zebu√≠nas.", "Apresenta maior teor de gordura externa.", "√â mais macia e tem fibras mais finas devido ao abate precoce.", "N√£o pode ser maturada."], respostaCorreta: "√â mais macia e tem fibras mais finas devido ao abate precoce.", explicacao: "A carne de novilho precoce vem de animais jovens que atingiram rapidamente o peso ideal, resultando em uma carne naturalmente mais tenra e de qualidade superior." },
        { pergunta: "O que as \"calpa√≠nas\" fazem na carne durante o processo de matura√ß√£o?", alternativas: ["Causam a oxida√ß√£o da gordura.", "Degrada√ß√£o das prote√≠nas das fibras musculares, amaciando a carne.", "Ativam o rigor mortis.", "Adicionam sabor salgado √† carne."], respostaCorreta: "Degrada√ß√£o das prote√≠nas das fibras musculares, amaciando a carne.", explicacao: "As calpa√≠nas s√£o as principais enzimas proteases end√≥genas que atuam no amaciamento da carne, quebrando as prote√≠nas das fibras musculares p√≥s-abate." },
        { pergunta: "Qual o objetivo do \"aparo\" (trimming) dos cortes de carne no frigor√≠fico?", alternativas: ["Adicionar peso √† carne.", "Padronizar o produto, removendo excesso de gordura e nervos.", "Deixar a carne mais fibrosa.", "Acelerar o processo de congelamento."], respostaCorreta: "Padronizar o produto, removendo excesso de gordura e nervos.", explicacao: "O aparo visa limpar o corte, retirando partes indesej√°veis para melhorar a apresenta√ß√£o, o rendimento e a experi√™ncia de consumo." },
        { pergunta: "Qual corte √© ideal para rosbife devido ao seu formato cil√≠ndrico e caracter√≠stica magra, permitindo fatias uniformes?", alternativas: ["Cox√£o Mole", "Lagarto", "Maminha", "Ponta de Peito"], respostaCorreta: "Lagarto", explicacao: "O Lagarto tem um formato cil√≠ndrico e √© magro, o que o torna perfeito para ser assado inteiro como rosbife e fatiado em rodelas uniformes." },
        { pergunta: "O que √© o rigor mortis no contexto da carne?", alternativas: ["O processo de embalagem a v√°cuo.", "O enrijecimento dos m√∫sculos do animal ap√≥s o abate.", "A matura√ß√£o a seco.", "A transforma√ß√£o do col√°geno em gelatina."], respostaCorreta: "O enrijecimento dos m√∫sculos do animal ap√≥s o abate.", explicacao: "O rigor mortis √© o endurecimento natural dos m√∫sculos que ocorre ap√≥s o abate, antes que as enzimas comecem a amaciar a carne na matura√ß√£o." },
        { pergunta: "Qual a principal caracter√≠stica da carne Nelore que a diferencia de ra√ßas como Angus e Wagyu em termos de marmoreio natural?", alternativas: ["Possui marmoreio muito superior.", "N√£o possui marmoreio.", "Possui naturalmente menos gordura entremeada.", "√â a √∫nica ra√ßa que pode ser maturada."], respostaCorreta: "Possui naturalmente menos gordura entremeada.", explicacao: "A carne Nelore, por ser de uma ra√ßa zebu√≠na, naturalmente tem menos gordura intramuscular (marmoreio) do que ra√ßas taurinas como Angus e Wagyu, embora a qualidade venha melhorando com o manejo." },
        { pergunta: "Qual a import√¢ncia de deixar a carne descansar ap√≥s assar ou grelhar?", alternativas: ["Para a carne esfriar mais r√°pido.", "Para as fibras se contra√≠rem e a carne ficar mais firme.", "Para os sucos se redistribu√≠rem, garantindo mais sucul√™ncia ao fatiar.", "Para a crosta ficar mais crocante."], respostaCorreta: "Para os sucos se redistribu√≠rem, garantindo mais sucul√™ncia ao fatiar.", explicacao: "O descanso permite que os sucos, que se concentram no centro da carne durante o cozimento, se redistribuam por toda a pe√ßa, resultando em uma carne mais suculenta quando cortada." },
        { pergunta: "Qual √© um dos principais benef√≠cios da matura√ß√£o a seco em termos de sabor?", alternativas: ["Sabor mais suave e delicado.", "Sabores concentrados e complexos, com notas de nozes/queijo.", "Sabor salgado intenso.", "Sabor neutro para absorver temperos."], respostaCorreta: "Sabores concentrados e complexos, com notas de nozes/queijo.", explicacao: "A desidrata√ß√£o e a a√ß√£o enzim√°tica prolongada na matura√ß√£o a seco resultam em um desenvolvimento de sabor muito mais intenso e com notas arom√°ticas complexas." },
        { pergunta: "Qual t√©cnica de preparo envolve fatias finas de carne recheadas e enroladas, cozidas lentamente em um molho?", alternativas: ["Bife √† Milanesa", "Bife √† Parmegiana", "Bife √† Rol√™", "Bife a Cavalo"], respostaCorreta: "Bife √† Rol√™", explicacao: "O bife √† rol√™ √© caracterizado pelo enrolamento da carne com um recheio, sendo depois cozido lentamente em molho para amaciar." },
        { pergunta: "O que √© a \"Aranha da Alcatra\"?", alternativas: ["Um corte grande e fibroso da alcatra.", "Uma pequena e macia pe√ßa da alcatra, √≥tima para bifes.", "Um tipo de gordura externa da alcatra.", "Um nervo que precisa ser removido da alcatra."], respostaCorreta: "Uma pequena e macia pe√ßa da alcatra, √≥tima para bifes.", explicacao: "A Aranha da Alcatra √© uma pequena pe√ßa de carne, conhecida por sua surpreendente maciez e sucul√™ncia, ideal para ser preparada como um bife r√°pido." },
        { pergunta: "Qual o principal objetivo do resfriamento r√°pido (pr√©-resfriamento) da carca√ßa no frigor√≠fico?", alternativas: ["Melhorar a cor da carne.", "Acelerar o processo de matura√ß√£o.", "Inibir o crescimento bacteriano e permitir o rigor mortis.", "Reduzir o peso da carca√ßa para venda."], respostaCorreta: "Inibir o crescimento bacteriano e permitir o rigor mortis.", explicacao: "O resfriamento r√°pido √© vital para a seguran√ßa alimentar, controlando a prolifera√ß√£o de microrganismos e permitindo que o processo de rigor mortis ocorra de forma adequada." },
        { pergunta: "Qual corte bovino √© um dos mais vers√°teis para fazer bifes, ensopados, strogonoff e carne mo√≠da, sendo macio e com pouca gordura?", alternativas: ["Cox√£o Duro", "Costela", "Cox√£o Mole", "Pesco√ßo"], respostaCorreta: "Cox√£o Mole", explicacao: "O Cox√£o Mole √© um corte do traseiro, de boa maciez e baixo teor de gordura, o que o torna extremamente vers√°til para uma variedade de preparos cotidianos." }
    ];
    // >>> FIM DAS NOVAS CONSTANTES E VARI√ÅVEIS PARA O TESTE DO ARTIGO <<<

    function playSound(soundName) {
        if (sounds[soundName]) {
            sounds[soundName].currentTime = 0;
            sounds[soundName].play().catch(e => console.warn("Erro ao tocar som:", soundName, e));
        }
    }

    function normalizeText(text) {
        return text
            .normalize("NFD")
            .replace(/[\u0300-\u036f]/g, "")
            .toLowerCase()
            .replace(/\s+/g, '')
            .trim();
    }

    function generateFakeEmail(username) {
        return `${normalizeText(username).replace(/[^a-z0-9]/g, '')}@butchercode.com`;
    }

    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    function updateUserAccessUI() {
        const isAdmin = currentUserRole === 'admin';
        const isCooperator = currentUserRole === 'cooperator';
        const canAddProducts = isAdmin || isCooperator;
        const isLoggedIn = !!currentUser;

        if (loginRegisterSidebarItem) loginRegisterSidebarItem.style.display = isLoggedIn ? 'none' : 'block';
        if (loginRegisterInitialScreen) loginRegisterInitialScreen.style.display = isLoggedIn ? 'none' : 'block';

        if (userProfileMenuItem) userProfileMenuItem.style.display = isLoggedIn ? 'block' : 'none';
        if (logoutSection) logoutSection.style.display = isLoggedIn ? 'block' : 'none';

        if (adminProductManagementMenuItem) adminProductManagementMenuItem.style.display = isAdmin ? 'block' : 'none';
        if (adminStatusText) adminStatusText.style.display = isAdmin ? 'block' : 'none';

        const addProductMenuItemEl = document.getElementById('addProductMenuItem');
        if (addProductMenuItemEl) {
            addProductMenuItemEl.style.display = canAddProducts && isLoggedIn ? 'block' : 'none';
        }

        if (mainContent.classList.contains('show-comments')) {
            loadComments();
        }
        if (mainContent.classList.contains('show-admin-products') && !isAdmin) {
            showSection('initialScreen');
        }
        const addProductSectionEl = document.getElementById('addProductSection');
        const editingCode = addProductSectionEl ? addProductSectionEl.dataset.editingCode : null;
        if (mainContent.classList.contains('show-add-product')) {
            if (editingCode && !isAdmin) {
                showSection('initialScreen');
            } else if (!editingCode && (!isLoggedIn || !canAddProducts)) {
                showSection('initialScreen');
            }
        }
    }

    function showSection(sectionId) {
        mainContent.classList.remove('show-terminal', 'show-game', 'show-initial', 'show-add-product', 'show-comments', 'show-profile', 'show-admin-products', 'show-artigo-carne');
        document.querySelectorAll('.back-to-home-button').forEach(btn => btn.style.display = 'none');

        clearInterval(timerInterval); clearInterval(tickSoundInterval);
        timeLeft = TIME_PER_QUESTION; if (progressBar) progressBar.style.width = '100%';

        if (mainContent.classList.contains('show-artigo-carne') && sectionId !== 'artigoCarneBovinaSection') {
            if(artigoGameElements) artigoGameElements.style.display = 'none';
            if(artigoGameEndScreen) artigoGameEndScreen.style.display = 'none';
            if(artigoGameStartScreen) artigoGameStartScreen.style.display = 'block'; // Reset visual
            currentArtigoQuestionIndex = 0;
            artigoScore = 0;
            artigoQuestionsAnswered = 0;
        }


        if (sectionId === 'mainTerminalSection') {
            mainContent.classList.add('show-terminal');
            if(backToHomeTerminalButton) backToHomeTerminalButton.style.display = 'block';
            if(inputCode) inputCode.focus();
        } else if (sectionId === 'gameCodeSection') {
            mainContent.classList.add('show-game');
            if(gameStartScreen) gameStartScreen.style.display = 'flex';
            if(gameElements) gameElements.style.display = 'none';
            if(gameEndScreen) gameEndScreen.style.display = 'none';
            if(startGameButton) startGameButton.focus();
            if(backToHomeGameButton) backToHomeGameButton.style.display = 'block';
        } else if (sectionId === 'addProductSection') {
            const addProductSectionEl = document.getElementById('addProductSection');
            const editingCode = addProductSectionEl ? addProductSectionEl.dataset.editingCode : null;
            const isAdmin = currentUserRole === 'admin';
            const isCooperator = currentUserRole === 'cooperator';
            const canAdd = isAdmin || isCooperator;

            if (!currentUser) {
                showAuthModal('Voc√™ precisa fazer login para acessar esta funcionalidade.');
                return;
            }

            if (!editingCode && !canAdd) {
                showAuthModal('Voc√™ n√£o tem permiss√£o para adicionar produtos.', 'Acesso Negado');
                if (currentUser) setTimeout(() => showSection('initialScreen'), 0);
                return;
            }
            if (editingCode && !isAdmin) {
                 showAuthModal('Voc√™ n√£o tem permiss√£o para editar produtos.', 'Acesso Negado');
                 if (currentUser) setTimeout(() => showSection('initialScreen'), 0);
                 return;
            }

            mainContent.classList.add('show-add-product');
            if(backToHomeAddProductButton) backToHomeAddProductButton.style.display = 'block';

            if (addProductSectionEl && !editingCode) {
                if(inputNewCode) inputNewCode.focus();
                resetAddProductForm();
            }
        } else if (sectionId === 'commentsSection') {
            mainContent.classList.add('show-comments');
            loadComments();
            if(backToHomeCommentsButton) backToHomeCommentsButton.style.display = 'block';

            if (currentUser) {
                if(commentLabel) commentLabel.style.display = 'block';
                if(commentInput) { commentInput.style.display = 'block'; commentInput.disabled = false; commentInput.focus(); }
                if(submitCommentButton) { submitCommentButton.style.display = 'block'; submitCommentButton.disabled = false; }
                if(loginToCommentMessage) loginToCommentMessage.style.display = 'none';
            } else {
                if(commentLabel) commentLabel.style.display = 'none';
                if(commentInput) { commentInput.style.display = 'none'; commentInput.disabled = true; }
                if(submitCommentButton) { submitCommentButton.style.display = 'none'; submitCommentButton.disabled = true; }
                if(loginToCommentMessage) {
                    loginToCommentMessage.style.display = 'block';
                    loginToCommentMessage.innerHTML = 'Voc√™ precisa <a href="#" id="loginLinkFromComments" style="color: var(--cor-link); text-decoration: underline;">fazer login</a> para comentar.';
                    const loginLink = document.getElementById('loginLinkFromComments');
                    if (loginLink && !loginLink.dataset.listenerAttached) {
                        loginLink.addEventListener('click', (e) => {
                            e.preventDefault();
                            showAuthModal('Fa√ßa login para poder comentar.');
                        });
                        loginLink.dataset.listenerAttached = 'true';
                    }
                }
            }
        } else if (sectionId === 'userProfileSection') {
            if (!currentUser) {
                showAuthModal('Voc√™ precisa fazer login para ver seu perfil.');
                return;
            }
            mainContent.classList.add('show-profile');
            if (currentUser && currentUser.uid && db) {
                getDoc(doc(db, 'users', currentUser.uid)).then(docSnap => {
                    const userData = docSnap.exists() ? docSnap.data() : null;
                    const displayName = userData && userData.username ? userData.username : (currentUser.email ? currentUser.email.split('@')[0] : 'Usu√°rio');

                    if(usernameDisplay) {
                       usernameDisplay.textContent = displayName;
                       if (currentUserRole === 'admin') {
                           usernameDisplay.classList.add('admin-username');
                       } else {
                           usernameDisplay.classList.remove('admin-username');
                       }
                    }
                    if(userEmailDisplay && currentUser.email) userEmailDisplay.textContent = currentUser.email;
                    if(adminStatusText) adminStatusText.style.display = (currentUserRole === 'admin') ? 'block' : 'none';
                }).catch(e => {
                    console.error("Erro ao carregar dados do perfil:", e);
                    if(usernameDisplay && currentUser.email) {
                        usernameDisplay.textContent = currentUser.email.split('@')[0];
                        usernameDisplay.classList.remove('admin-username');
                    }
                    if(userEmailDisplay && currentUser.email) userEmailDisplay.textContent = currentUser.email;
                    if(adminStatusText) adminStatusText.style.display = 'none';
                });
            }
            if(backToHomeProfileButton) backToHomeProfileButton.style.display = 'block';
        } else if (sectionId === 'adminProductManagementSection') {
            if (!currentUser || currentUserRole !== 'admin') {
                showAuthModal('Acesso restrito a administradores.');
                if (currentUser && currentUserRole !== 'admin') setTimeout(() => showSection('initialScreen'),0);
                return;
            }
            mainContent.classList.add('show-admin-products');
            populateAdminProductLists();
            if(backToHomeAdminProductsButton) backToHomeAdminProductsButton.style.display = 'block';
        } else if (sectionId === 'artigoCarneBovinaSection') { // NOVA SE√á√ÉO
            mainContent.classList.add('show-artigo-carne');
            if(artigoGameStartScreen) artigoGameStartScreen.style.display = 'block';
            if(artigoGameElements) artigoGameElements.style.display = 'none';
            if(artigoGameEndScreen) artigoGameEndScreen.style.display = 'none';
            if(backToHomeArtigoCarneButton) backToHomeArtigoCarneButton.style.display = 'block';
            // Resetar estado do quiz do artigo ao entrar na se√ß√£o, caso n√£o tenha sido feito ao sair de outra.
            currentArtigoQuestionIndex = 0;
            artigoScore = 0;
            artigoQuestionsAnswered = 0;
            if(artigoFeedbackElement) artigoFeedbackElement.innerHTML = '';
            if(artigoScoreDisplayElement) artigoScoreDisplayElement.textContent = '';
            if(artigoNextQuestionButton) artigoNextQuestionButton.style.display = 'none';
            if(artigoEndTestButton) artigoEndTestButton.style.display = 'block';
            if(artigoEndTestButton) artigoEndTestButton.textContent = "Finalizar Teste";

        } else if (sectionId === 'initialScreen') {
            mainContent.classList.add('show-initial');
            if(welcomeMessage) welcomeMessage.classList.add('show');
            if(initialScreenOptions) initialScreenOptions.classList.add('show');
        }

        if (hamburger) hamburger.classList.remove('open');
        if (sidebar) sidebar.classList.remove('open');
        document.body.classList.remove('sidebar-open');
    }

    function showAuthModal(reasonMessage = '', generalPrompt = 'Fa√ßa login ou crie uma conta para prosseguir:') {
        if(authModalTitle) authModalTitle.textContent = 'Bem-vindo, Mestre A√ßougueiro!';
        if (reasonMessage && authPrompt) {
            authPrompt.textContent = reasonMessage;
        } else if(authPrompt) {
            authPrompt.textContent = generalPrompt;
        }
        if(authError) authError.textContent = '';
        if(authModalOverlay) authModalOverlay.classList.add('show');

        if(authSubmit) authSubmit.textContent = 'Entrar';
        if(registerButton) registerButton.textContent = 'Criar Conta';

        if(usernameInputDOM) {
          usernameInputDOM.value = '';
          usernameInputDOM.focus();
        }
        if(passwordInput) passwordInput.value = '';
    }

    onAuthStateChanged(auth, async (user) => {
        if (user) {
            currentUser = user;
            try {
                const userDocRef = doc(db, 'users', user.uid);
                const userDocSnap = await getDoc(userDocRef);
                const userData = userDocSnap.exists() ? userDocSnap.data() : null;

                const displayName = userData && userData.username ? userData.username : (user.email ? user.email.split('@')[0] : 'Usu√°rio');

                currentUserRole = userData && userData.role ? userData.role : 'user';
                isCurrentUserAdmin = currentUserRole === 'admin';

                let welcomeDisplayName = displayName;
                if (isCurrentUserAdmin) {
                    welcomeDisplayName = `<span class="admin-username">${displayName}</span>`;
                } else if (currentUserRole === 'cooperator') {
                    welcomeDisplayName = `<span style="color: var(--cor-link);">${displayName} (Cooperador)</span>`;
                }

                if(welcomeMessage) welcomeMessage.innerHTML = `Bem-vindo, ${welcomeDisplayName}! <br>Vamos desenrolar!`;

                if (userProfileSection && userProfileSection.style.display !== 'none' && usernameDisplay) {
                    usernameDisplay.textContent = displayName;
                    if (isCurrentUserAdmin) {
                        usernameDisplay.classList.add('admin-username');
                    } else {
                        usernameDisplay.classList.remove('admin-username');
                    }
                }
                if(userEmailDisplay && user.email) userEmailDisplay.textContent = user.email;

            } catch (error) {
                console.error("Erro ao carregar dados do usu√°rio no Firestore:", error);
                const fallbackUsername = user.email ? user.email.split('@')[0] : 'Usu√°rio';
                if(welcomeMessage) welcomeMessage.innerHTML = `Bem-vindo, ${fallbackUsername}! <br>Vamos desenrolar!`;
                if(usernameDisplay) {
                    usernameDisplay.textContent = fallbackUsername;
                    usernameDisplay.classList.remove('admin-username');
                }
                if(userEmailDisplay && user.email) userEmailDisplay.textContent = user.email;

                currentUserRole = 'user';
                isCurrentUserAdmin = false;
            }

            if(welcomeMessage) welcomeMessage.classList.add('show');
            if(initialScreenOptions) initialScreenOptions.classList.add('show');
            if(authModalOverlay) authModalOverlay.classList.remove('show');
             if(loginRegisterInitialScreen) loginRegisterInitialScreen.style.display = 'none';


        } else {
            currentUser = null;
            isCurrentUserAdmin = false;
            currentUserRole = 'user';
            if(welcomeMessage) {
              welcomeMessage.innerHTML = "Boas-vindas ao ButcherCode! <br>Sua central de c√≥digos de a√ßougue. Explore, jogue e aprenda!";
            }
            if(welcomeMessage) welcomeMessage.classList.add('show');
            if(initialScreenOptions) initialScreenOptions.classList.add('show');
            if(authModalOverlay) authModalOverlay.classList.remove('show');
            if(loginRegisterInitialScreen) loginRegisterInitialScreen.style.display = 'block';

            if(usernameDisplay) {
                usernameDisplay.textContent = '';
                usernameDisplay.classList.remove('admin-username');
            }
            if(userEmailDisplay) userEmailDisplay.textContent = '';

            const isRestrictedSectionForGuests = mainContent.classList.contains('show-profile') ||
                                                mainContent.classList.contains('show-add-product') ||
                                                mainContent.classList.contains('show-admin-products');
            if (isRestrictedSectionForGuests) {
                 showSection('initialScreen');
            } else if (mainContent.classList.contains('show-comments')) {
                showSection('commentsSection');
            }
        }
        updateUserAccessUI();
    });

    if (closeAuthModalButton) {
        closeAuthModalButton.addEventListener('click', () => {
            if (authModalOverlay) authModalOverlay.classList.remove('show');
        });
    }
    if (authModalOverlay) {
        authModalOverlay.addEventListener('click', (event) => {
            if (event.target === authModalOverlay) {
                authModalOverlay.classList.remove('show');
            }
        });
    }

    if(authSubmit) {
        authSubmit.addEventListener('click', async () => {
            const usernameVal = usernameInputDOM.value.trim();
            const passwordVal = passwordInput.value.trim();
            if(authError) authError.textContent = '';

            if (authSubmit.textContent === 'Voltar para Login') {
                if(authModalTitle) authModalTitle.textContent = 'Bem-vindo, Mestre A√ßougueiro!';
                if(authPrompt) authPrompt.textContent = 'Fa√ßa login ou crie uma conta para prosseguir:';
                authSubmit.textContent = 'Entrar';
                if(registerButton) registerButton.textContent = 'Criar Conta';
                if(usernameInputDOM) usernameInputDOM.focus();
                return;
            }

            if (!usernameVal || !passwordVal) {
                if(authError) authError.textContent = 'Por favor, insira nome de usu√°rio e senha.';
                return;
            }

            try {
                const usersRef = collection(db, 'users');
                const q = query(usersRef, where('username', '==', usernameVal));
                const querySnapshot = await getDocs(q);

                if (querySnapshot.empty) {
                    if(authError) authError.textContent = 'Nome de usu√°rio ou senha inv√°lidos.';
                    return;
                }

                const userData = querySnapshot.docs[0].data();
                const fakeEmail = userData.email;

                if (!fakeEmail) {
                    if(authError) authError.textContent = 'Erro na conta. Por favor, contate o suporte.';
                    console.error('Usu√°rio encontrado no Firestore sem email falso:', userData);
                    return;
                }
                await signInWithEmailAndPassword(auth, fakeEmail, passwordVal);
            } catch (error) {
                console.error("Erro ao fazer login:", error);
                let errorMessage = "Erro no login.";
                if (error.code === 'auth/invalid-credential' || error.code === 'auth/wrong-password' || error.code === 'auth/user-not-found' || error.code === 'auth/invalid-email') {
                    errorMessage = "Nome de usu√°rio ou senha inv√°lidos.";
                } else if (error.code === 'auth/too-many-requests') {
                    errorMessage = "Muitas tentativas de login. Tente novamente mais tarde.";
                } else {
                    errorMessage = `Erro: ${error.message}`;
                }
                if(authError) authError.textContent = errorMessage;
            }
        });
    }

    if(registerButton) {
        registerButton.addEventListener('click', async () => {
            const usernameVal = usernameInputDOM.value.trim();
            const passwordVal = passwordInput.value.trim();
            if(authError) authError.textContent = '';

            if (registerButton.textContent === 'Criar Conta') {
                if(authModalTitle) authModalTitle.textContent = 'Criar Nova Conta';
                if(authPrompt) authPrompt.textContent = 'Preencha seus dados para criar sua conta:';
                if(authSubmit) authSubmit.textContent = 'Voltar para Login';
                registerButton.textContent = 'Registrar';
                if(usernameInputDOM) usernameInputDOM.focus();
            } else {
                if (!usernameVal) {
                    if(authError) authError.textContent = 'Por favor, insira um nome de usu√°rio.';
                    return;
                }
                if (!passwordVal) {
                    if(authError) authError.textContent = 'Por favor, insira uma senha.';
                    return;
                }

                const usersRef = collection(db, 'users');
                const q = query(usersRef, where('username', '==', usernameVal));
                const querySnapshot = await getDocs(q);
                if (!querySnapshot.empty) {
                    if(authError) authError.textContent = 'Este nome de usu√°rio j√° est√° em uso.';
                    return;
                }

                try {
                    const fakeEmail = generateFakeEmail(usernameVal);
                    const userCredential = await createUserWithEmailAndPassword(auth, fakeEmail, passwordVal);
                    const user = userCredential.user;

                    await setDoc(doc(db, 'users', user.uid), {
                        username: usernameVal,
                        email: fakeEmail,
                        createdAt: serverTimestamp(),
                        isAdmin: false,
                        role: 'user'
                    });
                } catch (error) {
                    console.error("Erro ao registrar:", error);
                    let errorMessage = "Erro no registro.";
                    if (error.code === 'auth/email-already-in-use') {
                        errorMessage = "Um erro inesperado ocorreu (o email gerado j√° existe). Tente outro nome de usu√°rio.";
                    } else if (error.code === 'auth/weak-password') {
                        errorMessage = "A senha deve ter pelo menos 6 caracteres.";
                    } else {
                        errorMessage = `Erro: ${error.message}`;
                    }
                    if(authError) authError.textContent = errorMessage;
                }
            }
        });
    }

    if (loginRegisterSidebarButton) {
        loginRegisterSidebarButton.addEventListener('click', () => {
            showAuthModal('Fa√ßa login ou crie uma conta para continuar.');
            if (hamburger && hamburger.classList.contains('open')) {
                hamburger.classList.remove('open');
                if (sidebar) sidebar.classList.remove('open');
                document.body.classList.remove('sidebar-open');
            }
        });
    }

    if (loginInitialLink) {
        loginInitialLink.addEventListener('click', (e) => {
            e.preventDefault();
            showAuthModal('Bem-vindo de volta! Fa√ßa seu login ou crie uma conta.');
            if(authModalTitle) authModalTitle.textContent = 'Bem-vindo, Mestre A√ßougueiro!';
            if(authPrompt) authPrompt.textContent = 'Fa√ßa login ou crie uma conta para prosseguir:';
            if(authSubmit) authSubmit.textContent = 'Entrar';
            if(registerButton) registerButton.textContent = 'Criar Conta';
            if(usernameInputDOM) usernameInputDOM.focus();
            if(passwordInput) passwordInput.value = '';
            if(authError) authError.textContent = '';
        });
    }

    if (registerInitialLink) {
        registerInitialLink.addEventListener('click', (e) => {
            e.preventDefault();
            showAuthModal('Novo por aqui? Crie sua conta ou fa√ßa login se j√° tiver uma.');
            if(authModalTitle) authModalTitle.textContent = 'Criar Nova Conta';
            if(authPrompt) authPrompt.textContent = 'Preencha seus dados para criar sua conta:';
            if(authSubmit) authSubmit.textContent = 'Voltar para Login';
            if(registerButton) registerButton.textContent = 'Registrar';
            if(usernameInputDOM) usernameInputDOM.focus();
            if(passwordInput) passwordInput.value = '';
            if(authError) authError.textContent = '';
        });
    }


    if(logoutButton) {
        logoutButton.addEventListener('click', async () => {
            try {
                await signOut(auth);
            } catch (error) {
                console.error("Erro ao fazer logout:", error);
                alert("Erro ao fazer logout.");
            }
        });
    }

    if(editUsernameButton) {
      editUsernameButton.addEventListener('click', () => {
          if(newUsernameInput) newUsernameInput.style.display = 'block';
          if(saveUsernameButton) saveUsernameButton.style.display = 'block';
          if(usernameUpdateFeedback) usernameUpdateFeedback.textContent = '';

          if (currentUser && db) {
              getDoc(doc(db, 'users', currentUser.uid)).then(docSnap => {
                  const userData = docSnap.data();
                  if(newUsernameInput) newUsernameInput.value = userData && userData.username ? userData.username : '';
                  if(newUsernameInput) newUsernameInput.focus();
              }).catch(e => console.error("Erro ao carregar nome de usu√°rio para edi√ß√£o:", e));
          }
          editUsernameButton.style.display = 'none';
      });
    }

    if(saveUsernameButton) {
      saveUsernameButton.addEventListener('click', async () => {
          const newUsernameVal = newUsernameInput.value.trim();
          if (!newUsernameVal) {
              if(usernameUpdateFeedback) {
                  usernameUpdateFeedback.textContent = 'O nome de usu√°rio n√£o pode estar vazio.';
                  usernameUpdateFeedback.style.color = 'var(--cor-erro)';
              }
              return;
          }

          if (currentUser && db) {
              try {
                  const usersRef = collection(db, 'users');
                  const q = query(usersRef, where('username', '==', newUsernameVal));
                  const querySnapshot = await getDocs(q);

                  let usernameExists = false;
                  querySnapshot.forEach(docSnap => {
                      if (docSnap.id !== currentUser.uid) {
                          usernameExists = true;
                      }
                  });

                  if (usernameExists) {
                      if(usernameUpdateFeedback) {
                          usernameUpdateFeedback.textContent = 'Este nome de usu√°rio j√° est√° em uso por outro usu√°rio.';
                          usernameUpdateFeedback.style.color = 'var(--cor-erro)';
                      }
                      return;
                  }

                  const userDocRef = doc(db, 'users', currentUser.uid);
                  await updateDoc(userDocRef, {
                      username: newUsernameVal
                  });

                  const displayName = newUsernameVal;
                  if(usernameDisplay) {
                    usernameDisplay.textContent = displayName;
                    if (currentUserRole === 'admin') {
                        usernameDisplay.classList.add('admin-username');
                    } else {
                        usernameDisplay.classList.remove('admin-username');
                    }
                  }

                  let welcomeDisplayName = displayName;
                  if (currentUserRole === 'admin') {
                        welcomeDisplayName = `<span class="admin-username">${displayName}</span>`;
                  } else if (currentUserRole === 'cooperator') {
                        welcomeDisplayName = `<span style="color: var(--cor-link);">${displayName} (Cooperador)</span>`;
                  }
                  if(welcomeMessage) welcomeMessage.innerHTML = `Bem-vindo, ${welcomeDisplayName}! <br>Vamos desenrolar!`;


                  if(usernameUpdateFeedback) {
                      usernameUpdateFeedback.textContent = 'Nome de usu√°rio atualizado com sucesso!';
                      usernameUpdateFeedback.style.color = 'var(--cor-sucesso)';
                  }
                  if(newUsernameInput) newUsernameInput.style.display = 'none';
                  if(saveUsernameButton) saveUsernameButton.style.display = 'none';
                  if(editUsernameButton) editUsernameButton.style.display = 'block';
                  setTimeout(() => { if(usernameUpdateFeedback) usernameUpdateFeedback.textContent = ''; }, 3000);
              } catch (error) {
                  console.error("Erro ao atualizar nome de usu√°rio:", error);
                  if(usernameUpdateFeedback) {
                      usernameUpdateFeedback.textContent = `Erro ao atualizar: ${error.message}`;
                      usernameUpdateFeedback.style.color = 'var(--cor-erro)';
                  }
              }
          }
      });
    }

    async function loadProductData() {
        try {
            const response = await fetch(`https://getpantry.cloud/apiv1/pantry/${PANTRY_ID}/basket/${BASKET_NAME}`);
            if (!response.ok) {
                if (response.status === 404) {
                    console.warn("Pantry basket n√£o encontrado ou vazio. Usando dados padr√£o e tentando criar.");
                    productData = {
                        bovinos: {"14601":"Ac√©m","14625":"Alcatra com Maminha","1762":"Bisteca com osso","14694":"Colch√£o Duro","26390":"Colch√£o Mole"},
                        suinos: {"11549":"Bisteca Su√≠na","18159":"P√© Su√≠no"},
                        meta: { version: 0, last_updated: new Date().toISOString() }
                    };
                } else {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
            } else {
                const data = await response.json();
                if (data && data.bovinos && data.suinos && data.meta) {
                    productData = data;
                } else {
                    console.warn("Dados do Pantry em formato inesperado. Usando dados padr√£o.");
                    productData = { bovinos: {}, suinos: {}, meta: { version: 0, last_updated: new Date().toISOString() } };
                }
            }
        } catch (error) {
            console.error("Erro ao carregar dados do Pantry:", error);
             productData = {
                "meta": { "version": 1, "last_updated": new Date().toISOString() },
                "bovinos": { "14601": "Ac√©m", "14625": "Alcatra com Maminha", "1762": "Bisteca com osso", "14694": "Colch√£o Duro", "26390": "Colch√£o Mole", "25812": "Contra Fil√©", "14793": "Cora√ß√£o da Alcatra", "4282": "F√≠gado", "14762": "Lagarto", "14809": "Miolo da Paleta", "14618": "M√∫sculo do Dianteiro", "14816": "Paleta", "14823": "Patinho", "00260": "Picanha em Peda√ßos", "05418": "Picanha Grill", "16094": "Picanha Maturada", "07160": "Picanha Todo Dia", "06019": "Picanha Tradicional" },
                "suinos": { "11549": "Bisteca Su√≠na", "23023": "Carne Su√≠na Corte", "15776": "Carne Su√≠na Embalada", "23740": "Costela com Panceta Su√≠na Corte", "23733": "Costela com Panceta Su√≠na Embalada", "18159": "P√© Su√≠no" }
            };
        } finally {
             rebuildProductIndexesAndSidebar();
             if (mainContent.classList.contains('show-admin-products') && currentUserRole === 'admin') {
                populateAdminProductLists();
            }
        }
    }

    async function saveProductData() {
        try {
            const now = new Date();
            productData.meta = {
                version: (productData.meta && typeof productData.meta.version === 'number' ? productData.meta.version : 0) + 1,
                last_updated: now.toISOString()
            };
            const response = await fetch(`https://getpantry.cloud/apiv1/pantry/${PANTRY_ID}/basket/${BASKET_NAME}`, {
                method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(productData)
            });
            if (!response.ok) {
                const errorText = await response.text();
                throw new Error(`HTTP error! status: ${response.status} - ${errorText}`);
            }
            console.log("Dados salvos com sucesso no Pantry!");
            return true;
        } catch (error) {
            console.error("Erro ao salvar dados no Pantry:", error);
            const feedbackEl = document.getElementById('addProductFeedback') || document.getElementById('adminProductManagementFeedback');
            if(feedbackEl) {
                 feedbackEl.textContent = 'Erro ao salvar dados online.';
                 feedbackEl.style.color = 'var(--cor-erro)';
            } else {
                alert("Erro ao salvar dados online. Verifique seu Pantry ID ou nome da cesta.");
            }
            return false;
        }
    }

    function populateSidebarList(listElement, data) {
        if(!listElement) return;
        listElement.innerHTML = '';
        if (!data || Object.keys(data).length === 0) {
            const li = document.createElement('li');
            li.textContent = "Nenhum item nesta categoria.";
            li.style.paddingLeft = "8px";
            li.style.fontStyle = "italic";
            listElement.appendChild(li);
            return;
        }
        Object.entries(data).sort(([,a],[,b]) => a.localeCompare(b)).forEach(([code, name]) => {
            const li = document.createElement('li');
            li.classList.add('item');
            li.textContent = `${code.padStart(5, '0')} - ${name}`;
            li.tabIndex = 0;
            li.addEventListener('click', () => {
                showSection('mainTerminalSection');
                if(inputCode) inputCode.value = code.padStart(5, '0');
                displayResult(name, true);
                if(resultDiv) resultDiv.classList.remove('success', 'error');
                if(hamburger) hamburger.classList.remove('open');
                if(sidebar) sidebar.classList.remove('open');
                document.body.classList.remove('sidebar-open');
            });
            listElement.appendChild(li);
        });
    }

    function rebuildProductIndexesAndSidebar() {
        productsInverseNormalized = {};
        if (productData.bovinos) {
            Object.entries(productData.bovinos).forEach(([code, name]) => {
              productsInverseNormalized[normalizeText(name)] = { code: code.padStart(5, '0'), originalName: name };
            });
        }
        if (productData.suinos) {
            Object.entries(productData.suinos).forEach(([code, name]) => {
              productsInverseNormalized[normalizeText(name)] = { code: code.padStart(5, '0'), originalName: name };
            });
        }
        populateSidebarList(bovinosList, productData.bovinos);
        populateSidebarList(suinosList, productData.suinos);

        if (currentUserRole === 'admin' && mainContent.classList.contains('show-admin-products')) {
            populateAdminProductLists();
        }
    }

    function displayResult(text, isSuccess) {
        if(!resultDiv) return;
        resultDiv.innerHTML = '';
        resultDiv.classList.remove('scrolling', 'success', 'error');
        const marqueeSpan = document.createElement('span');
        marqueeSpan.textContent = text;
        resultDiv.appendChild(marqueeSpan);
        const icon = document.createElement('i');
        icon.classList.add('feedback-icon');
        icon.classList.add(isSuccess ? 'fa-check-circle' : 'fa-times-circle', isSuccess ? 'fas' : 'fa');
        resultDiv.appendChild(icon);
        resultDiv.classList.add(isSuccess ? 'success' : 'error');
        playSound(isSuccess ? 'terminalSuccess' : 'terminalError');
        setTimeout(() => icon.classList.add('show'), 50);
        setTimeout(() => { icon.classList.remove('show'); icon.remove(); }, 1500);
        if (text.length > (resultDiv.offsetWidth / parseFloat(getComputedStyle(resultDiv).fontSize)) * 0.8 ) {
            marqueeSpan.classList.add('marquee');
            void resultDiv.offsetWidth; resultDiv.classList.add('scrolling');
        }
    }

    function buscarCodigoOuNome(inputVal) {
      const texto = inputVal.trim();
      if (!texto) return { result: "Nenhum valor digitado.", found: false };
      if (/^\d+$/.test(texto)) {
        const codigo = texto.padStart(5, '0');
        const nomeBovino = productData.bovinos ? productData.bovinos[codigo] : undefined;
        const nomeSuino = productData.suinos ? productData.suinos[codigo] : undefined;
        const nomeProduto = nomeBovino || nomeSuino;
        return { result: nomeProduto || `C√≥digo "${codigo}" n√£o encontrado.`, found: !!nomeProduto };
      } else {
        const normalizedInput = normalizeText(texto);
        const foundData = productsInverseNormalized[normalizedInput];
        return { result: foundData ? foundData.code : `Produto "${texto}" n√£o encontrado.`, found: !!foundData };
      }
    }

    if(btnExecute && inputCode) {
      btnExecute.addEventListener('click', () => {
        const valor = inputCode.value;
        const { result: res, found } = buscarCodigoOuNome(valor);
        displayResult(res, found);
      });
      inputCode.addEventListener('keydown', e => { if (e.key === 'Enter') btnExecute.click(); });
      inputCode.addEventListener('input', () => {
        if(resultDiv) { resultDiv.innerHTML = ''; resultDiv.classList.remove('scrolling', 'success', 'error'); }
      });
    }

    function resetAddProductForm() {
        if(inputNewCode) inputNewCode.value = '';
        if(inputNewName) inputNewName.value = '';
        if(selectNewCategory) selectNewCategory.value = 'bovinos';
        if(inputNewCode) inputNewCode.readOnly = false;
        if(btnAddNewProduct) btnAddNewProduct.textContent = 'Adicionar Produto';
        if(addProductFeedback) addProductFeedback.textContent = '';
        if(addProductSectionTitle) addProductSectionTitle.textContent = 'Adicionar Novo Produto';

        const addProductSectionEl = document.getElementById('addProductSection');
        if (addProductSectionEl) {
            delete addProductSectionEl.dataset.editingCode;
            delete addProductSectionEl.dataset.originalCategory;
        }
    }

    function handleSetupEditProduct(event) {
        if (!currentUser || currentUserRole !== 'admin') {
            showAuthModal('Apenas administradores podem editar produtos.');
            return;
        }
        const { code, name, category } = event.target.dataset;

        showSection('addProductSection');

        if(inputNewCode) {
            inputNewCode.value = code;
            inputNewCode.readOnly = true;
        }
        if(inputNewName) inputNewName.value = name;
        if(selectNewCategory) selectNewCategory.value = category;

        if(btnAddNewProduct) btnAddNewProduct.textContent = 'Salvar Altera√ß√µes';

        const addProductSectionEl = document.getElementById('addProductSection');
        if (addProductSectionEl) {
            addProductSectionEl.dataset.editingCode = code;
            addProductSectionEl.dataset.originalCategory = category;
        }

        if(addProductFeedback) {
            addProductFeedback.textContent = `Editando produto: ${name} (${code.padStart(5, '0')})`;
            addProductFeedback.style.color = 'var(--cor-aviso)';
        }
        if(addProductSectionTitle) addProductSectionTitle.textContent = 'Editar Produto';
        if(inputNewName) inputNewName.focus();
    }

    if(btnAddNewProduct && inputNewCode && inputNewName && selectNewCategory && addProductFeedback) {
      btnAddNewProduct.addEventListener('click', async () => {
          if (!currentUser) {
              addProductFeedback.textContent = 'Voc√™ precisa estar logado para esta a√ß√£o.';
              addProductFeedback.style.color = 'var(--cor-erro)';
              showAuthModal('Voc√™ precisa estar logado.');
              return;
          }

          const addProductSectionEl = document.getElementById('addProductSection');
          const editingCode = addProductSectionEl ? addProductSectionEl.dataset.editingCode : null;
          const originalCategory = addProductSectionEl ? addProductSectionEl.dataset.originalCategory : null;

          const newNameVal = inputNewName.value.trim();
          const categoryVal = selectNewCategory.value;

          if (editingCode) {
              if (currentUserRole !== 'admin') {
                  addProductFeedback.textContent = 'Apenas administradores podem editar produtos.';
                  addProductFeedback.style.color = 'var(--cor-erro)';
                  setTimeout(() => resetAddProductForm(), 3000);
                  return;
              }
              if (!newNameVal) {
                  addProductFeedback.textContent = 'O nome do produto n√£o pode estar vazio.';
                  addProductFeedback.style.color = 'var(--cor-aviso)';
                  return;
              }
              const normalizedNewName = normalizeText(newNameVal);
              for (const cat in productData) {
                  if (cat === 'bovinos' || cat === 'suinos') {
                      for (const codeKey in productData[cat]) {
                          if (codeKey !== editingCode && normalizeText(productData[cat][codeKey]) === normalizedNewName) {
                              addProductFeedback.textContent = `O nome "${newNameVal}" j√° est√° em uso por outro produto.`;
                              addProductFeedback.style.color = 'var(--cor-erro)';
                              return;
                          }
                      }
                  }
              }

              if (productData[originalCategory] && productData[originalCategory][editingCode]) {
                  if (originalCategory !== categoryVal) {
                      delete productData[originalCategory][editingCode];
                      if (!productData[categoryVal]) productData[categoryVal] = {};
                      productData[categoryVal][editingCode] = newNameVal;
                  } else {
                      productData[categoryVal][editingCode] = newNameVal;
                  }
              } else {
                  addProductFeedback.textContent = 'Erro: Produto original n√£o encontrado para edi√ß√£o.';
                  addProductFeedback.style.color = 'var(--cor-erro)';
                  setTimeout(() => resetAddProductForm(), 3000);
                  return;
              }

              const successSave = await saveProductData();
              if (successSave) {
                  addProductFeedback.textContent = `Produto "${newNameVal}" (${editingCode.padStart(5, '0')}) atualizado!`;
                  addProductFeedback.style.color = 'var(--cor-sucesso)';
                  rebuildProductIndexesAndSidebar();
                  setTimeout(() => {
                      resetAddProductForm();
                      showSection('adminProductManagementSection');
                  }, 1500);
              } else {
                  addProductFeedback.textContent = 'Erro ao salvar altera√ß√µes no Pantry. Recarregando dados originais...';
                  addProductFeedback.style.color = 'var(--cor-erro)';
                  await loadProductData();
                  setTimeout(() => resetAddProductForm(), 3000);
              }
          } else {
              const canAddProducts = currentUserRole === 'admin' || currentUserRole === 'cooperator';
              if (!canAddProducts) {
                  addProductFeedback.textContent = 'Voc√™ n√£o tem permiss√£o para adicionar novos produtos.';
                  addProductFeedback.style.color = 'var(--cor-erro)';
                  setTimeout(() => {
                      resetAddProductForm();
                      showSection('initialScreen');
                  }, 2000);
                  return;
              }

              const newCodeVal = inputNewCode.value.trim();
              if (!newCodeVal || !newNameVal || !categoryVal) {
                  addProductFeedback.textContent = 'Preencha todos os campos.'; addProductFeedback.style.color = 'var(--cor-aviso)'; return;
              }
              if (inputNewCode.readOnly) {
                  inputNewCode.readOnly = false;
              }
              const formattedCode = newCodeVal.padStart(5, '0');
              const codeExists = (productData.bovinos && productData.bovinos[formattedCode]) || (productData.suinos && productData.suinos[formattedCode]);
              if (codeExists) {
                  addProductFeedback.textContent = `C√≥digo "${formattedCode}" j√° existente!`; addProductFeedback.style.color = 'var(--cor-erro)'; return;
              }
              if (productsInverseNormalized[normalizeText(newNameVal)]) {
                  addProductFeedback.textContent = `Nome de produto "${newNameVal}" j√° existente!`; addProductFeedback.style.color = 'var(--cor-erro)'; return;
              }

              if (categoryVal === 'bovinos') {
                  if (!productData.bovinos) productData.bovinos = {}; productData.bovinos[formattedCode] = newNameVal;
              } else if (categoryVal === 'suinos') {
                  if (!productData.suinos) productData.suinos = {}; productData.suinos[formattedCode] = newNameVal;
              }
              const successSave = await saveProductData();
              if (successSave) {
                  addProductFeedback.textContent = `Produto "${newNameVal}" (${formattedCode}) adicionado!`; addProductFeedback.style.color = 'var(--cor-sucesso)';
                  rebuildProductIndexesAndSidebar();
                  setTimeout(() => resetAddProductForm(), 1500);
              } else {
                  addProductFeedback.textContent = 'Erro ao adicionar produto online. Altera√ß√£o local n√£o salva.'; addProductFeedback.style.color = 'var(--cor-erro)';
                  if (categoryVal === 'bovinos' && productData.bovinos) delete productData.bovinos[formattedCode];
                  if (categoryVal === 'suinos' && productData.suinos) delete productData.suinos[formattedCode];
                  setTimeout(() => { if(addProductFeedback) addProductFeedback.textContent = ''; }, 3000);
              }
          }
      });
    }

    async function loadComments() {
        if (!commentsList || !db) return;
        commentsList.innerHTML = '<p style="text-align: center; color: var(--cor-texto-secundario);">Carregando coment√°rios...</p>';
        try {
            const commentsCollectionRef = collection(db, 'comments');
            const q_comments = query(commentsCollectionRef, orderBy('timestamp', 'desc'), limit(20));
            const querySnapshot = await getDocs(q_comments);
            if (querySnapshot.empty) {
                commentsList.innerHTML = '<p style="text-align: center; color: var(--cor-texto-secundario);">Nenhum coment√°rio ainda. Seja o primeiro a deixar um!</p>'; return;
            }
            commentsList.innerHTML = '';
            querySnapshot.forEach(docSnap => {
                const comment = docSnap.data();
                const commentId = docSnap.id;
                const div = document.createElement('div');
                div.classList.add('comment-item');

                const strongElement = document.createElement('strong');
                const commenterNameText = comment.username || 'An√¥nimo';

                if (comment.authorRole === 'admin') {
                    const adminSpan = document.createElement('span');
                    adminSpan.classList.add('admin-username');
                    adminSpan.textContent = commenterNameText;
                    strongElement.appendChild(adminSpan);
                } else if (comment.authorRole === 'cooperator') {
                    const cooperatorSpan = document.createElement('span');
                    cooperatorSpan.classList.add('cooperator-username');
                    cooperatorSpan.textContent = commenterNameText;
                    strongElement.appendChild(cooperatorSpan);
                } else {
                    strongElement.textContent = commenterNameText;
                }
                strongElement.appendChild(document.createTextNode(': '));


                const commentTextNode = document.createTextNode(comment.comment + " ");

                const date = comment.timestamp && comment.timestamp.toDate ? new Date(comment.timestamp.toDate()) : new Date();
                const formattedDate = date.toLocaleString('pt-BR', { day: '2-digit', month: '2-digit', year: 'numeric', hour: '2-digit', minute: '2-digit' });
                const timestampSpan = document.createElement('span');
                timestampSpan.classList.add('timestamp');
                timestampSpan.textContent = formattedDate;

                div.appendChild(strongElement);
                div.appendChild(commentTextNode);
                div.appendChild(timestampSpan);

                if (currentUserRole === 'admin') {
                    const deleteBtn = document.createElement('button');
                    deleteBtn.textContent = 'Apagar';
                    deleteBtn.classList.add('admin-delete-comment-btn');
                    deleteBtn.onclick = async () => {
                        if (confirm('Tem certeza que deseja apagar este coment√°rio? Esta a√ß√£o √© irrevers√≠vel.')) {
                            try {
                                await deleteDoc(doc(db, 'comments', commentId));
                                commentsFeedback.textContent = 'Coment√°rio apagado com sucesso!';
                                commentsFeedback.style.color = 'var(--cor-sucesso)';
                                loadComments();
                            } catch (e) {
                                console.error("Erro ao apagar coment√°rio:", e);
                                commentsFeedback.textContent = `Erro ao apagar: ${e.message}`;
                                commentsFeedback.style.color = 'var(--cor-erro)';
                            }
                            setTimeout(() => { if(commentsFeedback) commentsFeedback.textContent = ''; }, 3000);
                        }
                    };
                    div.appendChild(deleteBtn);
                }
                commentsList.appendChild(div);
            });
        } catch (error) {
            console.error("Erro ao carregar coment√°rios:", error);
            commentsList.innerHTML = '<p style="text-align: center; color: var(--cor-erro);">Erro ao carregar coment√°rios.</p>';
        }
    }

    if(submitCommentButton && commentInput && commentsFeedback) {
      submitCommentButton.addEventListener('click', async () => {
          if (!currentUser) {
              commentsFeedback.textContent = 'Voc√™ precisa estar logado para enviar um coment√°rio.';
              commentsFeedback.style.color = 'var(--cor-erro)';
              showAuthModal('Voc√™ precisa estar logado para enviar um coment√°rio.');
              return;
          }
          const commentText = commentInput.value.trim();
          if (!commentText) {
              commentsFeedback.textContent = 'O coment√°rio n√£o pode estar vazio.'; commentsFeedback.style.color = 'var(--cor-aviso)'; return;
          }
          try {
              const userDocRef = doc(db, 'users', currentUser.uid);
              const userDocSnap = await getDoc(userDocRef);
              const userData = userDocSnap.exists() ? userDocSnap.data() : null;
              const username = userData && userData.username ? userData.username : (currentUser.email ? currentUser.email.split('@')[0] : 'An√¥nimo');
              const userRoleForComment = currentUserRole;

              await addDoc(collection(db, 'comments'), {
                  userId: currentUser.uid,
                  username: username,
                  comment: commentText,
                  timestamp: serverTimestamp(),
                  isAuthorAdmin: userData && userData.role === 'admin',
                  authorRole: userRoleForComment
              });
              commentsFeedback.textContent = 'Coment√°rio enviado com sucesso!'; commentsFeedback.style.color = 'var(--cor-sucesso)';
              commentInput.value = ''; loadComments();
          } catch (error) {
              console.error("Erro ao enviar coment√°rio:", error);
              commentsFeedback.textContent = `Erro ao enviar coment√°rio: ${error.message}`; commentsFeedback.style.color = 'var(--cor-erro)';
          }
          setTimeout(() => { if(commentsFeedback) commentsFeedback.textContent = ''; }, 3000);
      });
    }

    function populateAdminProductLists() {
        if (currentUserRole !== 'admin' || !adminBovinosList || !adminSuinosList) return;

        adminBovinosList.innerHTML = '';
        adminSuinosList.innerHTML = '';

        const createProductListItem = (code, name, category) => {
            const li = document.createElement('li');
            const infoSpan = document.createElement('span');
            infoSpan.classList.add('product-info');
            infoSpan.textContent = `${code.padStart(5, '0')} - ${name}`;

            const editBtn = document.createElement('button');
            editBtn.textContent = 'Editar';
            editBtn.classList.add('edit-product-btn');
            editBtn.dataset.code = code;
            editBtn.dataset.name = name;
            editBtn.dataset.category = category;
            editBtn.addEventListener('click', handleSetupEditProduct);

            const deleteBtn = document.createElement('button');
            deleteBtn.textContent = 'Excluir';
            deleteBtn.classList.add('delete-product-btn');
            deleteBtn.dataset.code = code;
            deleteBtn.dataset.category = category;
            deleteBtn.addEventListener('click', handleDeleteProduct);

            li.appendChild(infoSpan);
            li.appendChild(editBtn);
            li.appendChild(deleteBtn);
            return li;
        };

        if (productData.bovinos && Object.keys(productData.bovinos).length > 0) {
            Object.entries(productData.bovinos).sort(([,a],[,b]) => a.localeCompare(b)).forEach(([code, name]) => {
                adminBovinosList.appendChild(createProductListItem(code, name, 'bovinos'));
            });
        } else {
            adminBovinosList.innerHTML = '<li>Nenhum produto bovino cadastrado.</li>';
        }

        if (productData.suinos && Object.keys(productData.suinos).length > 0) {
             Object.entries(productData.suinos).sort(([,a],[,b]) => a.localeCompare(b)).forEach(([code, name]) => {
                adminSuinosList.appendChild(createProductListItem(code, name, 'suinos'));
            });
        } else {
            adminSuinosList.innerHTML = '<li>Nenhum produto su√≠no cadastrado.</li>';
        }
    }

    async function handleDeleteProduct(event) {
        if (currentUserRole !== 'admin') {
            if(adminProductManagementFeedback) {
                adminProductManagementFeedback.textContent = 'Apenas administradores podem excluir produtos.';
                adminProductManagementFeedback.style.color = 'var(--cor-erro)';
            }
            return;
        }

        const codeToDelete = event.target.dataset.code;
        const categoryToDelete = event.target.dataset.category;

        if (confirm(`Tem certeza que deseja excluir o produto ${codeToDelete}? Esta a√ß√£o √© irrevers√≠vel!`)) {
            let productFoundAndDeleted = false;
            if (categoryToDelete === 'bovinos' && productData.bovinos && productData.bovinos[codeToDelete]) {
                delete productData.bovinos[codeToDelete];
                productFoundAndDeleted = true;
            } else if (categoryToDelete === 'suinos' && productData.suinos && productData.suinos[codeToDelete]) {
                delete productData.suinos[codeToDelete];
                productFoundAndDeleted = true;
            }

            if (productFoundAndDeleted) {
                if(adminProductManagementFeedback) {
                    adminProductManagementFeedback.textContent = 'Tentando excluir produto do Pantry...';
                    adminProductManagementFeedback.style.color = 'var(--cor-aviso)';
                }

                const successSave = await saveProductData();
                if (successSave) {
                    if(adminProductManagementFeedback) {
                        adminProductManagementFeedback.textContent = `Produto ${codeToDelete} exclu√≠do com sucesso!`;
                        adminProductManagementFeedback.style.color = 'var(--cor-sucesso)';
                    }
                    rebuildProductIndexesAndSidebar();
                } else {
                    if(adminProductManagementFeedback) {
                        adminProductManagementFeedback.textContent = 'Erro ao excluir produto do Pantry. Recarregando dados originais...';
                        adminProductManagementFeedback.style.color = 'var(--cor-erro)';
                    }
                    await loadProductData();
                }
            } else {
                if(adminProductManagementFeedback) {
                    adminProductManagementFeedback.textContent = 'Produto n√£o encontrado para exclus√£o.';
                    adminProductManagementFeedback.style.color = 'var(--cor-erro)';
                }
            }
            setTimeout(() => { if(adminProductManagementFeedback) adminProductManagementFeedback.textContent = ''; }, 4000);
        }
    }

    if(butcherCodeTitle) butcherCodeTitle.addEventListener('click', () => showSection('initialScreen'));
    if(accessTerminalButton) accessTerminalButton.addEventListener('click', () => showSection('mainTerminalSection'));
    if(playGameCodeButton) playGameCodeButton.addEventListener('click', () => showSection('gameCodeSection'));
    if(viewCommentsButton) viewCommentsButton.addEventListener('click', () => showSection('commentsSection'));

    document.querySelectorAll('[data-type="main-content"]').forEach(el => {
        const target = el.dataset.target;
        if (target) {
            el.addEventListener('click', () => {
                if (target === 'addProductSection') {
                    const isAdmin = currentUserRole === 'admin';
                    const isCooperator = currentUserRole === 'cooperator';
                    if (!currentUser) {
                        showAuthModal('Voc√™ precisa fazer login para adicionar produtos.');
                        return;
                    }
                    if (!(isAdmin || isCooperator)) {
                        showAuthModal('Voc√™ n√£o tem permiss√£o para adicionar produtos.', 'Acesso Negado');
                        return;
                    }
                } else if (target === 'adminProductManagementSection') {
                    if (currentUserRole !== 'admin') {
                        showAuthModal('Acesso restrito a administradores.', 'Acesso Negado');
                        return;
                    }
                }
                showSection(target);
            });
        }
    });

    document.querySelectorAll('.back-to-home-button').forEach(button => {
        button.addEventListener('click', (e) => {
            if (e.target.id === 'backToHomeAddProduct' || mainContent.classList.contains('show-add-product')) {
                 resetAddProductForm();
            }
            // Adicionado para resetar o teste do artigo se estiver voltando dele para o in√≠cio
            if (e.target.id === 'backToHomeArtigoCarne' || mainContent.classList.contains('show-artigo-carne')) {
                if(artigoGameElements) artigoGameElements.style.display = 'none';
                if(artigoGameEndScreen) artigoGameEndScreen.style.display = 'none';
                if(artigoGameStartScreen) artigoGameStartScreen.style.display = 'block'; // Reset visual
            }
            showSection('initialScreen');
        });
    });


    if(hamburger && sidebar) {
      hamburger.addEventListener('click', () => {
        hamburger.classList.toggle('open'); sidebar.classList.toggle('open'); document.body.classList.toggle('sidebar-open');
      });
    }
    document.addEventListener('click', e => {
      if (sidebar && !sidebar.contains(e.target) && hamburger && !hamburger.contains(e.target) && authModalOverlay && !authModalOverlay.contains(e.target) && e.target !== butcherCodeTitle) {
        if(hamburger) hamburger.classList.remove('open'); if(sidebar) sidebar.classList.remove('open'); document.body.classList.remove('sidebar-open');
      }
    });
    if(sidebarTitles) {
      sidebarTitles.forEach(title => {
        if (title.id === 'loginRegisterSidebarButton') return;

        title.addEventListener('click', () => {
          const targetId = title.dataset.target;
          const contentType = title.dataset.type;
          const targetElement = document.getElementById(targetId);

          if (contentType === 'accordion' && targetElement) {
              if (activeAccordionItem && activeAccordionItem !== targetElement) {
                  activeAccordionItem.classList.remove('open');
                  if(activeAccordionItem.previousElementSibling) activeAccordionItem.previousElementSibling.classList.remove('open');
              }
              targetElement.classList.toggle('open'); title.classList.toggle('open');
              activeAccordionItem = targetElement.classList.contains('open') ? targetElement : null;
              clearInterval(timerInterval); clearInterval(tickSoundInterval); timeLeft = TIME_PER_QUESTION;
              if(progressBar) progressBar.style.width = '100%';
          } else if (contentType === 'main-content' && targetId !== 'logoutButton') {
              if (mainContent.classList.contains('show-add-product') && targetId !== 'addProductSection') {
                  resetAddProductForm();
              }
              if (mainContent.classList.contains('show-artigo-carne') && targetId !== 'artigoCarneBovinaSection') {
                  if(artigoGameElements) artigoGameElements.style.display = 'none';
                  if(artigoGameEndScreen) artigoGameEndScreen.style.display = 'none';
                  if(artigoGameStartScreen) artigoGameStartScreen.style.display = 'block';
                  currentArtigoQuestionIndex = 0;
                  artigoScore = 0;
                  artigoQuestionsAnswered = 0;
              }
              showSection(targetId);
              document.querySelectorAll('#sidebar .subfolder').forEach(folder => {
                  folder.classList.remove('open'); if(folder.previousElementSibling) folder.previousElementSibling.classList.remove('open');
              });
              activeAccordionItem = null;
          }
        });
      });
    }

    // --- Game Logic (GameCode) ---
    function generateQuestions() {
        const allProductsList = [];
        if (productData.bovinos) Object.entries(productData.bovinos).forEach(([code, name]) => allProductsList.push([code, name]));
        if (productData.suinos) Object.entries(productData.suinos).forEach(([code, name]) => allProductsList.push([code, name]));
        const generated = []; const numQuestionsToGenerate = Math.min(20, allProductsList.length * 2);
        if (allProductsList.length < 2) { console.warn("Poucos produtos para gerar perguntas."); return []; }
        for (let i = 0; i < numQuestionsToGenerate; i++) {
            const type = Math.random() < 0.5 ? 'codeToName' : 'nameToCode';
            const [correctCode, correctName] = allProductsList[Math.floor(Math.random() * allProductsList.length)];
            let questionText, correctAnswer; let optionsSet = new Set();
            if (type === 'codeToName') {
                questionText = `Qual o nome do produto com o c√≥digo: ${correctCode.padStart(5, '0')}?`; correctAnswer = correctName;
            } else {
                questionText = `Qual o c√≥digo do produto: ${correctName}?`; correctAnswer = correctCode.padStart(5, '0');
            }
            optionsSet.add(correctAnswer);
            while (optionsSet.size < Math.min(4, allProductsList.length)) {
                const [randomCode, randomName] = allProductsList[Math.floor(Math.random() * allProductsList.length)];
                let randomOption = (type === 'codeToName') ? randomName : randomCode.padStart(5, '0');
                if (randomOption !== correctAnswer && randomOption !== undefined && randomOption !== null && String(randomOption).trim() !== '') {
                    optionsSet.add(randomOption);
                }
            }
            const shuffledOptions = Array.from(optionsSet); shuffleArray(shuffledOptions);
            generated.push({ question: questionText, options: shuffledOptions, correctAnswer: correctAnswer });
        }
        return generated;
    }
    function saveGameState() { localStorage.setItem(GAME_STATE_KEY, JSON.stringify({ currentQuestionIndex, score, questions, timeLeft })); }
    function loadGameState() {
        const savedState = localStorage.getItem(GAME_STATE_KEY);
        if (savedState) { try {
            const gameState = JSON.parse(savedState);
            if (gameState && typeof gameState.currentQuestionIndex === 'number' && typeof gameState.score === 'number' && Array.isArray(gameState.questions) && typeof gameState.timeLeft === 'number') {
                currentQuestionIndex = gameState.currentQuestionIndex; score = gameState.score; questions = gameState.questions;
                timeLeft = (gameState.timeLeft > 0 && gameState.timeLeft <= TIME_PER_QUESTION) ? gameState.timeLeft : TIME_PER_QUESTION; return true;
            }} catch (e) { console.error("Erro ao carregar estado do jogo:", e); localStorage.removeItem(GAME_STATE_KEY); }
        } return false;
    }
    function startTimer() {
        clearInterval(timerInterval); clearInterval(tickSoundInterval);
        timeLeft = (timeLeft === undefined || timeLeft === null || timeLeft <= 0 || timeLeft > TIME_PER_QUESTION) ? TIME_PER_QUESTION : timeLeft;
        if(timerElement) { timerElement.textContent = `Tempo: ${timeLeft}s`; timerElement.classList.remove('warning', 'critical'); }
        if(progressBar) progressBar.style.width = `${(timeLeft / TIME_PER_QUESTION) * 100}%`;
        if (timeLeft <= 5 && timeLeft > 0) tickSoundInterval = setInterval(() => { if (timeLeft > 0) playSound('tick'); }, 1000);
        timerInterval = setInterval(() => {
            timeLeft--; if(timerElement) timerElement.textContent = `Tempo: ${timeLeft}s`;
            const progress = (timeLeft / TIME_PER_QUESTION) * 100; if(progressBar) progressBar.style.width = `${progress}%`;
            if (timeLeft <= 5 && timeLeft > 0) {
                if(timerElement) { timerElement.classList.add('warning'); timerElement.classList.remove('critical'); }
                if (!tickSoundInterval) tickSoundInterval = setInterval(() => { if (timeLeft > 0) playSound('tick'); }, 1000);
            } else if (timeLeft <= 0) {
                clearInterval(timerInterval); clearInterval(tickSoundInterval);
                if(timerElement) { timerElement.textContent = "Tempo esgotado!"; timerElement.classList.add('critical'); } checkAnswer(null);
            } else { if(timerElement) timerElement.classList.remove('warning', 'critical'); clearInterval(tickSoundInterval); tickSoundInterval = null; }
            saveGameState();
        }, 1000);
    }
    function showQuestion() {
      if (currentQuestionIndex < questions.length) {
        timeLeft = TIME_PER_QUESTION; startTimer(); const currentQuestion = questions[currentQuestionIndex];
        if(questionElement) questionElement.textContent = currentQuestion.question;
        if(optionsElement) optionsElement.innerHTML = '';
        currentQuestion.options.forEach(option => {
          const button = document.createElement('button'); button.textContent = option; button.dataset.answer = option;
          button.addEventListener('click', checkAnswer); if(optionsElement) optionsElement.appendChild(button);
        });
        if(feedbackElement) { feedbackElement.textContent = ''; feedbackElement.className = ''; }
        if(nextQuestionButton) nextQuestionButton.style.display = 'none';
        if(questionCounterElement) questionCounterElement.textContent = `Pergunta ${currentQuestionIndex + 1} de ${questions.length}`;
        const totalQuestionsAttempted = currentQuestionIndex;
        const percentage = totalQuestionsAttempted > 0 ? (((score / totalQuestionsAttempted) * 100) || 0).toFixed(0) : 0;
        if(scoreDisplayElement) scoreDisplayElement.textContent = `Pontua√ß√£o: ${score}/${totalQuestionsAttempted} (${percentage}%)`;
        saveGameState();
      } else endGame(false);
    }
    function checkAnswer(event) {
      clearInterval(timerInterval); clearInterval(tickSoundInterval);
      const currentQuestion = questions[currentQuestionIndex]; if (!currentQuestion) return;
      const correctAnswer = currentQuestion.correctAnswer; let selectedAnswer = null;
      if (event && event.target) selectedAnswer = event.target.dataset.answer;
      if(optionsElement) optionsElement.querySelectorAll('button').forEach(button => {
        button.disabled = true;
        if (button.dataset.answer === correctAnswer) button.style.backgroundColor = 'var(--cor-botao-hover)';
        else if (button.dataset.answer === selectedAnswer) button.style.backgroundColor = '#660000';
      });
      if (selectedAnswer === correctAnswer) {
        if(feedbackElement) { feedbackElement.textContent = 'Correto!'; feedbackElement.className = 'correct'; } score++; playSound('correct');
      } else {
        if(feedbackElement) { feedbackElement.textContent = `Incorreto. A resposta correta era: ${currentQuestion.correctAnswer}`; feedbackElement.className = 'incorrect'; } playSound('incorrect');
      }
      currentQuestionIndex++;
      const totalQuestionsAttempted = currentQuestionIndex;
      const percentage = totalQuestionsAttempted > 0 ? (((score / totalQuestionsAttempted) * 100) || 0).toFixed(0) : 0;
      if(scoreDisplayElement) scoreDisplayElement.textContent = `Pontua√ß√£o: ${score}/${totalQuestionsAttempted} (${percentage}%)`;
      if(nextQuestionButton) nextQuestionButton.style.display = 'block'; saveGameState();
    }
    function nextQuestion() {
      if(feedbackElement) { feedbackElement.textContent = ''; feedbackElement.className = ''; }
      if(optionsElement) optionsElement.querySelectorAll('button').forEach(button => { button.style.backgroundColor = 'var(--cor-botao-fundo)'; button.disabled = false; });
      showQuestion();
    }
    function endGame(earlyExit = false) {
      clearInterval(timerInterval); clearInterval(tickSoundInterval);
      if(gameElements) gameElements.style.display = 'none'; if(gameEndScreen) gameEndScreen.style.display = 'flex'; playSound('gameEnd');
      const totalQuestionsAttempted = currentQuestionIndex;
      const finalPercentage = totalQuestionsAttempted > 0 ? ((score / totalQuestionsAttempted) * 100).toFixed(0) : 0;
      let message = "Sua pontua√ß√£o final foi: "; if (earlyExit) message = "Voc√™ finalizou o jogo antecipadamente! <br>Sua pontua√ß√£o parcial foi: ";
      if(finalScoreMessage) finalScoreMessage.innerHTML = `${message}<br><span style="font-size: 2em; color: ${finalPercentage >= 70 ? 'var(--cor-sucesso)' : (finalPercentage >= 40 ? 'var(--cor-aviso)' : 'var(--cor-critico)')};">${score} de ${totalQuestionsAttempted} (${finalPercentage}%)</span>`;
      if(scoreDisplayElement) scoreDisplayElement.textContent = ''; if(questionCounterElement) questionCounterElement.textContent = '';
      if(timerElement) timerElement.textContent = ''; if(progressBar) progressBar.style.width = '100%';
      localStorage.removeItem(GAME_STATE_KEY);
    }
    function startGame() {
      if(gameStartScreen) gameStartScreen.style.display = 'none'; if(gameEndScreen) gameEndScreen.style.display = 'none';
      if(gameElements) gameElements.style.display = 'block'; playSound('gameStart');
      if (!loadGameState() || questions.length === 0 || currentQuestionIndex >= questions.length) {
          currentQuestionIndex = 0; score = 0; questions = generateQuestions(); shuffleArray(questions);
          localStorage.removeItem(GAME_STATE_KEY); timeLeft = TIME_PER_QUESTION;
      }
      if (questions.length === 0) {
          if(gameElements) gameElements.style.display = 'none';
          if(gameStartScreen) {
              gameStartScreen.style.display = 'flex'; const h3 = gameStartScreen.querySelector('h3'); if(h3) h3.textContent = 'Aten√ß√£o!';
              const p = gameStartScreen.querySelector('p'); if(p) p.innerHTML = 'N√£o h√° produtos suficientes para gerar perguntas. Adicione mais produtos para come√ßar a jogar!';
          } if(startGameButton) startGameButton.style.display = 'none'; return;
      } else {
          if(startGameButton) startGameButton.style.display = 'block';
          if(gameStartScreen){
              const h3 = gameStartScreen.querySelector('h3'); if(h3) h3.textContent = 'Bem-vindo ao GameCode!';
              const p = gameStartScreen.querySelector('p'); if(p) p.innerHTML = 'Teste seus conhecimentos sobre os c√≥digos de a√ßougue.<br>Voc√™ ter√° 15 segundos para responder a cada uma das 20 perguntas.';
          }
      }
      if(scoreDisplayElement) scoreDisplayElement.textContent = '';
      if(nextQuestionButton) {
          nextQuestionButton.textContent = 'Pr√≥xima Pergunta'; nextQuestionButton.removeEventListener('click', startGame); nextQuestionButton.addEventListener('click', nextQuestion);
      }
      if(optionsElement) optionsElement.querySelectorAll('button').forEach(button => { button.style.backgroundColor = 'var(--cor-botao-fundo)'; button.disabled = false; });
      showQuestion();
    }

    if(startGameButton) startGameButton.addEventListener('click', startGame);
    if(restartGameButton) restartGameButton.addEventListener('click', startGame);
    if(endGameButton) endGameButton.addEventListener('click', () => endGame(true));

    // >>> IN√çCIO DAS FUN√á√ïES PARA O TESTE DO ARTIGO (REVISADO E SIMPLIFICADO) <<<

    function startArtigoTest() {
        currentArtigoQuestionIndex = 0;
        artigoScore = 0;
        artigoQuestionsAnswered = 0;
        perguntasArtigoCarneBovina = [...dadosPerguntasArtigo];
        shuffleArray(perguntasArtigoCarneBovina);

        if(artigoGameStartScreen) artigoGameStartScreen.style.display = 'none';
        if(artigoGameEndScreen) artigoGameEndScreen.style.display = 'none';
        if(artigoGameElements) artigoGameElements.style.display = 'block';
        if(artigoEndTestButton) artigoEndTestButton.style.display = 'block';
        if(artigoEndTestButton) artigoEndTestButton.textContent = "Finalizar Teste";

        displayArtigoQuestion();
    }

    function displayArtigoQuestion() {
        if (currentArtigoQuestionIndex < perguntasArtigoCarneBovina.length) {
            const currentQuestion = perguntasArtigoCarneBovina[currentArtigoQuestionIndex];
            if(artigoQuestionElement) artigoQuestionElement.textContent = currentQuestion.pergunta;
            if(artigoQuestionCounterElement) artigoQuestionCounterElement.textContent = `Pergunta ${currentArtigoQuestionIndex + 1} de ${perguntasArtigoCarneBovina.length}`;

            if(artigoOptionsElement) artigoOptionsElement.innerHTML = '';
            currentQuestion.alternativas.forEach(alt => {
                const button = document.createElement('button');
                button.textContent = alt;
                button.addEventListener('click', () => handleArtigoAnswerOptionClick(alt, currentQuestion.respostaCorreta, currentQuestion.explicacao));
                artigoOptionsElement.appendChild(button);
            });

            if(artigoFeedbackElement) {
                artigoFeedbackElement.innerHTML = '';
                artigoFeedbackElement.className = '';
            }
            if(artigoNextQuestionButton) artigoNextQuestionButton.style.display = 'none';
            updateArtigoScoreDisplay();
        } else {
            endArtigoTest(false);
        }
    }

    function handleArtigoAnswerOptionClick(selectedAnswer, correctAnswer, explanation) {
        artigoQuestionsAnswered++;
        const isCorrect = selectedAnswer === correctAnswer;

        if (isCorrect) {
            artigoScore++;
            if(artigoFeedbackElement) {
                artigoFeedbackElement.innerHTML = `<strong>Correto!</strong><br>${explanation}`;
                artigoFeedbackElement.className = 'correct-explanation';
            }
            playSound('correct');
        } else {
            if(artigoFeedbackElement) {
                artigoFeedbackElement.innerHTML = `<strong>Incorreto.</strong> A resposta correta era: <strong class="correct-answer-text">${correctAnswer}</strong>.<br>${explanation}`;
                artigoFeedbackElement.className = 'incorrect-explanation';
            }
            playSound('incorrect');
        }

        if(artigoOptionsElement) {
            artigoOptionsElement.querySelectorAll('button').forEach(button => {
                button.disabled = true;
                if (button.textContent === correctAnswer) {
                    button.style.backgroundColor = 'var(--cor-destaque)';
                    button.style.color = '#000'; // Melhor contraste para o texto da resposta correta
                } else if (button.textContent === selectedAnswer && !isCorrect) {
                    button.style.backgroundColor = 'var(--cor-critico)';
                }
            });
        }

        updateArtigoScoreDisplay();
        if (currentArtigoQuestionIndex < perguntasArtigoCarneBovina.length - 1) {
            if(artigoNextQuestionButton) artigoNextQuestionButton.style.display = 'block';
        } else {
            if(artigoNextQuestionButton) artigoNextQuestionButton.style.display = 'none';
            if(artigoEndTestButton) artigoEndTestButton.textContent = "Ver Resultado Final";
        }
    }

    function nextArtigoQuestion() {
        currentArtigoQuestionIndex++;
        displayArtigoQuestion();
        if(artigoEndTestButton) artigoEndTestButton.textContent = "Finalizar Teste";
    }

    function updateArtigoScoreDisplay() {
        if (artigoQuestionsAnswered > 0) {
            const percentage = ((artigoScore / artigoQuestionsAnswered) * 100).toFixed(0);
            if(artigoScoreDisplayElement) artigoScoreDisplayElement.textContent = `Pontua√ß√£o: ${artigoScore} de ${artigoQuestionsAnswered} respondidas (${percentage}%)`;
        } else {
            if(artigoScoreDisplayElement) artigoScoreDisplayElement.textContent = 'Responda a primeira pergunta para ver sua pontua√ß√£o.';
        }
    }

    function endArtigoTest(earlyExit = true) {
        if(artigoGameElements) artigoGameElements.style.display = 'none';
        if(artigoGameEndScreen) artigoGameEndScreen.style.display = 'flex';

        let message;
        if (artigoQuestionsAnswered > 0) {
            const percentage = ((artigoScore / artigoQuestionsAnswered) * 100).toFixed(0);
            message = `Voc√™ acertou ${artigoScore} de ${artigoQuestionsAnswered} perguntas respondidas (${percentage}%).`;
        } else {
            message = "Voc√™ n√£o respondeu nenhuma pergunta nesta tentativa.";
        }
        if(artigoFinalScoreMessage) artigoFinalScoreMessage.innerHTML = message;
        playSound('gameEnd');
    }

    if(startArtigoTestButton) startArtigoTestButton.addEventListener('click', startArtigoTest);
    if(artigoNextQuestionButton) artigoNextQuestionButton.addEventListener('click', nextArtigoQuestion);
    if(artigoEndTestButton) artigoEndTestButton.addEventListener('click', () => endArtigoTest(true));
    if(artigoRestartTestButton) {
        artigoRestartTestButton.addEventListener('click', () => {
            if(artigoGameEndScreen) artigoGameEndScreen.style.display = 'none';
            if(artigoGameStartScreen) artigoGameStartScreen.style.display = 'block';
            currentArtigoQuestionIndex = 0;
            artigoScore = 0;
            artigoQuestionsAnswered = 0;
            if(artigoFeedbackElement) {
                artigoFeedbackElement.innerHTML = '';
                artigoFeedbackElement.className = '';
            }
            if(artigoScoreDisplayElement) artigoScoreDisplayElement.textContent = '';
            if(artigoNextQuestionButton) artigoNextQuestionButton.style.display = 'none';
            if(artigoEndTestButton) artigoEndTestButton.textContent = "Finalizar Teste";
            if(artigoEndTestButton) artigoEndTestButton.style.display = 'block';
        });
    }
    if(backToHomeArtigoCarneButton) {
        backToHomeArtigoCarneButton.addEventListener('click', () => showSection('initialScreen'));
    }
    // >>> FIM DAS FUN√á√ïES PARA O TESTE DO ARTIGO <<<

    if(backToHomeAdminProductsButton) backToHomeAdminProductsButton.addEventListener('click', () => showSection('initialScreen'));

    loadProductData();
    showSection('initialScreen');
  });
</script>
</body>
</html>
